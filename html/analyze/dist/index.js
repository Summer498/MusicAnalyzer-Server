"use strict";function Ut(e){let t=function(n){let r=[];for(let a of n)r=r.concat(Ut(a));return r};return e instanceof Array?t(e):[e]}Element.prototype.setAttributes=function(e){for(let t in e)this.setAttribute(t,String(e[t]));return this};Element.prototype.setText=function(e){return this.appendChild(document.createTextNode(e)),this};Element.prototype.appendChildren=function(e){for(let t of Ut(e))this.appendChild(t);return this};function hr(e,t={},n="",r=[]){for(let a in t)e.setAttribute(a,String(t[a]));return e.appendChild(document.createTextNode(n)),Ut(r).forEach(a=>e.appendChild(a)),e}function j(e,t={},n="",r=[]){return hr(document.createElement(e),t,n,r)}function me(e,t={},n="",r=[]){return hr(document.createElementNS("http://www.w3.org/2000/svg",e),t,n,r)}var y=class{static svg(e={},t="",n=[]){return me("svg",e,t,n)}static g(e={},t="",n=[]){return me("g",e,t,n)}static circle(e={},t="",n=[]){return me("circle",e,t,n)}static rect(e={},t="",n=[]){return me("rect",e,t,n)}static polygon(e={},t="",n=[]){return me("polygon",e,t,n)}static line(e={},t="",n=[]){return me("line",e,t,n)}static text(e={},t="",n=[]){return me("text",e,t,n)}},Lt=class{static get base(){return document.getElementsByTagName("base")[0]}static get head(){return document.getElementsByTagName("head")[0]}static get body(){return document.getElementsByTagName("body")[0]}static get title(){return document.getElementsByTagName("title")[0]}static div(e={},t="",n=[]){return j("div",e,t,n)}static span(e={},t="",n=[]){return j("span",e,t,n)}static p(e={},t="",n=[]){return j("p",e,t,n)}static h1(e={},t="",n=[]){return j("h1",e,t,n)}static h2(e={},t="",n=[]){return j("h2",e,t,n)}static h3(e={},t="",n=[]){return j("h3",e,t,n)}static h4(e={},t="",n=[]){return j("h4",e,t,n)}static h5(e={},t="",n=[]){return j("h5",e,t,n)}static h6(e={},t="",n=[]){return j("h6",e,t,n)}static ol(e={},t="",n=[]){return j("ol",e,t,n)}static li(e={},t="",n=[]){return j("li",e,t,n)}static script(e={},t="",n=[]){return j("script",e,t,n)}static link(e={},t="",n=[]){return j("link",e,t,n)}};var le=(e,t,n=1)=>[...Array(Math.abs(t-e))].map((r,a)=>a*n+e),Ht=e=>[...Array(e)].map(t=>0),pr=(e,t,n)=>{if(typeof t=="number")return e.map(r=>n(r,Number(t)));if(t instanceof Array)return e.map((r,a)=>n(e[a],t[a]));throw TypeError("arguments of vFunc must be (a:number[], b:number, f:(a:number,b:number)=>number")};var at=(e,t)=>(e%t+t)%t,Se=e=>e-Math.floor(e);var fr=(e,t)=>pr(e,t,(n,r)=>n+r);var yr=(e,t)=>pr(e,t,(n,r)=>at(n,r));var Kt=e=>e.map((t,n)=>[t,n]).reduce((t,n)=>n[0]>=t[0]?n:t)[1];var Xt=e=>e.reduce((t,n)=>t+n);var rt={multiply:(e,t)=>[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]],add:(e,t)=>[e[0]+t[0],e[1]+t[1]],subtract:(e,t)=>[e[0]-t[0],e[1]-t[1]]},wm=class{static cache={};static exponent(e,t){let n=-2*Math.PI*(e/t);return this.cache[t]||=[],this.cache[t][e]||=[Math.cos(n),Math.sin(n)],this.cache[t][e]}},we=e=>{let t=Math.pow(2,Math.ceil(Math.log2(e.length)));if(t!==e.length){let o=Array.isArray(e[0])?[0,0]:0;e=[...Array(t)].map((m,i)=>i<e.length?e[i]:o)}let n=[];if(t==1)return Array.isArray(e[0])?[[e[0][0],e[0][1]]]:[[e[0],0]];let r=we(e.filter((o,m)=>m%2===0)),a=we(e.filter((o,m)=>m%2==1));for(let o=0;o<t/2;o++){let m=r[o],i=rt.multiply(wm.exponent(o,t),a[o]);n[o]=rt.add(m,i),n[o+t/2]=rt.subtract(m,i)}return n},Sm=e=>{let t=we(e.map(n=>[n[1],n[0]]));return t.map(n=>[n[1]/t.length,n[0]/t.length])},_m=(e,t)=>{let n=we(e),r=we(t),a=n.map((o,m)=>rt.multiply(o,r[m]));return Sm(a)},gr=(e,t)=>_m(e,t.reverse());var br=(e,t)=>(e%t+t)%t,Jt=(e,t,n)=>{let r=br(e,360)/60,a=t*Math.abs(br(r+1,2)-1);return[[t,a,0],[a,t,0],[0,t,a],[0,a,t],[a,0,t],[t,0,a]][Math.floor(r)].map(o=>Math.floor((o+1-t)*n*255))},_e=e=>"#"+e.map(t=>("0"+t.toString(16)).slice(-2)).join("");var Wt=new AudioContext;function Tm(e,t,n,r,a){let o=e.createOscillator();return o.type=n,o.frequency.value=r,o.detune.value=a,o.connect(t),o}function Dm(e,t,n){let r=e.createGain();return r.gain.value=n,r.connect(t),r}function ot(e=[330,440,550],t,n){let r=Wt,a=Wt.destination,o=1/e.length,m=.02,i=.4,s=.7*o,u=.1*n,c=0,d=1;e.map((l,M)=>{let P=Dm(r,a,0),L=Tm(r,P,"sawtooth",l,c+d*M),h=Wt.currentTime+t,R=Math.random()*.1,S=P.gain;L.start(h),S.cancelScheduledValues(h),S.linearRampToValueAtTime(0,.002+h+R),S.linearRampToValueAtTime(o,h+R+m),S.linearRampToValueAtTime(s,h+R+m+i),S.linearRampToValueAtTime(s,h+R+n),S.exponentialRampToValueAtTime(.001,h+n+u),L.stop(h+n+u)})}function ue(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function de(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var vr=[0,2,4,-1,1,3,5],Ar=vr.map(e=>Math.floor(e*7/12));function mt(e){let{step:t,alt:n,oct:r,dir:a=1}=e,o=vr[t]+7*n;if(r===void 0)return[a*o];let m=r-Ar[t]-4*n;return[a*o,a*m]}var Cm=[3,0,4,1,5,2,6];function it(e){let[t,n,r]=e,a=Cm[Em(t)],o=Math.floor((t+1)/7);if(n===void 0)return{step:a,alt:o,dir:r};let m=n+4*o+Ar[a];return{step:a,alt:o,oct:m,dir:r}}function Em(e){let t=(e+1)%7;return t<0?7+t:t}var Nr=(e,t)=>Array(Math.abs(t)+1).join(e),Zt=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),Vm="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",km="(AA|A|P|M|m|d|dd)([-+]?\\d+)",$m=new RegExp("^"+Vm+"|"+km+"$");function Fm(e){let t=$m.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var jr={};function I(e){return typeof e=="string"?jr[e]||(jr[e]=Rm(e)):de(e)?I(qm(e)):ue(e)?I(e.name):Zt}var Ir=[0,2,4,5,7,9,11],xr="PMMPPMM";function Rm(e){let t=Fm(e);if(t[0]==="")return Zt;let n=+t[0],r=t[1],a=(Math.abs(n)-1)%7,o=xr[a];if(o==="M"&&r==="P")return Zt;let m=o==="M"?"majorable":"perfectable",i=""+n+r,s=n<0?-1:1,u=n===8||n===-8?n:s*(a+1),c=Om(m,r),d=Math.floor((Math.abs(n)-1)/7),l=s*(Ir[a]+c+12*d),M=(s*(Ir[a]+c)%12+12)%12,P=mt({step:a,alt:c,oct:d,dir:s});return{empty:!1,name:i,num:n,q:r,step:a,alt:c,dir:s,type:m,simple:u,semitones:l,chroma:M,coord:P,oct:d}}function st(e,t){let[n,r=0]=e,a=n*7+r*12<0,o=t||a?[-n,-r,-1]:[n,r,1];return I(it(o))}function Om(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function qm(e){let{step:t,alt:n,oct:r=0,dir:a}=e;if(!a)return"";let o=t+1+7*r,m=o===0?t+1:o,i=a<0?"-":"",s=xr[t]==="M"?"majorable":"perfectable";return i+m+Gm(s,n)}function Gm(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?Nr("A",t):Nr("d",e==="perfectable"?t:t+1)}var wr=(e,t)=>Array(Math.abs(t)+1).join(e),_r=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),Sr=new Map,Bm=e=>"CDEFGAB".charAt(e),ct=e=>e<0?wr("b",-e):wr("#",e),lt=e=>e[0]==="b"?-e.length:e.length;function p(e){let t=JSON.stringify(e),n=Sr.get(t);if(n)return n;let r=typeof e=="string"?Lm(e):de(e)?p(Hm(e)):ue(e)?p(e.name):_r;return Sr.set(t,r),r}var zm=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function ut(e){let t=zm.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function Tr(e){return p(it(e))}var Um=(e,t)=>(e%t+t)%t,Qt=[0,2,4,5,7,9,11];function Lm(e){let t=ut(e);if(t[0]===""||t[3]!=="")return _r;let n=t[0],r=t[1],a=t[2],o=(n.charCodeAt(0)+3)%7,m=lt(r),i=a.length?+a:void 0,s=mt({step:o,alt:m,oct:i}),u=n+r+a,c=n+r,d=(Qt[o]+m+120)%12,l=i===void 0?Um(Qt[o]+m,12)-12*99:Qt[o]+m+12*(i+1),M=l>=0&&l<=127?l:null,P=i===void 0?null:Math.pow(2,(l-69)/12)*440;return{empty:!1,acc:r,alt:m,chroma:d,coord:s,freq:P,height:l,letter:n,midi:M,name:u,oct:i,pc:c,step:o}}function Hm(e){let{step:t,alt:n,oct:r}=e,a=Bm(t);if(!a)return"";let o=a+ct(n);return r||r===0?o+r:o}function b(e,t){let n=p(e),r=Array.isArray(t)?t:I(t).coord;if(n.empty||!r||r.length<2)return"";let a=n.coord,o=a.length===1?[a[0]+r[0]]:[a[0]+r[0],a[1]+r[1]];return Tr(o).name}function dt(e,t){let n=e.length;return r=>{if(!t)return"";let a=r<0?(n- -r%n)%n:r%n,o=Math.floor(r/n),m=b(t,[0,o]);return b(m,e[a])}}function Me(e,t){let n=p(e),r=p(t);if(n.empty||r.empty)return"";let a=n.coord,o=r.coord,m=o[0]-a[0],i=a.length===2&&o.length===2?o[1]-a[1]:-Math.floor(m*7/12),s=r.height===n.height&&r.midi!==null&&n.midi!==null&&n.step>r.step;return st([m,i],s).name}function A(e,t,n){return function(...r){return console.warn(`${e} is deprecated. Use ${t}.`),n.apply(this,r)}}var Dr=A("isNamed","isNamedPitch",ue);function Pe(e,t){let n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}function Yt(e){return e.filter(t=>t===0||t)}var O={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},kr=e=>Number(e).toString(2).padStart(12,"0"),Cr=e=>parseInt(e,2),Jm=/^[01]{12}$/;function en(e){return Jm.test(e)}var Wm=e=>typeof e=="number"&&e>=0&&e<=4095,Zm=e=>e&&en(e.chroma),Er={[O.chroma]:O};function q(e){let t=en(e)?e:Wm(e)?kr(e):Array.isArray(e)?ni(e):Zm(e)?e.chroma:O.chroma;return Er[t]=Er[t]||ti(t)}var PM=A("Pcset.pcset","Pcset.get",q);var Qm=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function Ym(e){let t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(Qm[n]);return t}function tn(e,t=!0){let r=q(e).chroma.split("");return Yt(r.map((a,o)=>{let m=Pe(o,r);return t&&m[0]==="0"?null:m.join("")}))}function nn(e){let t=q(e).setNum;return n=>{let r=q(n).setNum;return t&&t!==r&&(r&t)===r}}function Mt(e){let t=q(e).setNum;return n=>{let r=q(n).setNum;return t&&t!==r&&(r|t)===r}}function ei(e){let t=e.split("");return t.map((n,r)=>Pe(r,t).join(""))}function ti(e){let t=Cr(e),n=ei(e).map(Cr).filter(o=>o>=2048).sort()[0],r=kr(n),a=Ym(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:a}}function ni(e){if(e.length===0)return O.chroma;let t,n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=p(e[r]),t.empty&&(t=I(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var ri=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 \u0394 ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 \u03949 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 \u0394#4 \u0394#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -\u03947 m\u0394 -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim \xB0 o"],["1P 3m 5d 7d","diminished seventh","dim7 \xB07 o7"],["1P 3m 5d 7m","half-diminished","m7b5 \xF8 -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 \u03949#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],ai=ri,oi={...O,name:"",quality:"Unknown",intervals:[],aliases:[]},rn=[],Te={};function an(e){return Te[e]||oi}var yM=A("ChordType.chordType","ChordType.get",an);function ie(){return rn.slice()}var gM=A("ChordType.entries","ChordType.all",ie);function mi(e,t,n){let r=si(e),a={...q(e),name:n||"",quality:r,intervals:e,aliases:t};rn.push(a),a.name&&(Te[a.name]=a),Te[a.setNum]=a,Te[a.chroma]=a,a.aliases.forEach(o=>ii(a,o))}function ii(e,t){Te[t]=e}function si(e){let t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}ai.forEach(([e,t,n])=>mi(e.split(" "),n.split(" "),t));rn.sort((e,t)=>e.setNum-t.setNum);var ci=e=>{let t=e.reduce((n,r)=>{let a=p(r).chroma;return a!==void 0&&(n[a]=n[a]||p(r).name),n},{});return n=>t[n]};function on(e,t={}){let n=e.map(a=>p(a).pc).filter(a=>a);return p.length===0?[]:pi(n,1,t).filter(a=>a.weight).sort((a,o)=>o.weight-a.weight).map(a=>a.name)}var Pt={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},ht=e=>t=>!!(t&e),li=ht(Pt.anyThirds),ui=ht(Pt.perfectFifth),di=ht(Pt.anySeventh),Mi=ht(Pt.nonPerfectFifths);function Pi(e){let t=parseInt(e.chroma,2);return li(t)&&ui(t)&&di(t)}function hi(e){let t=parseInt(e,2);return Mi(t)?e:(t|16).toString(2)}function pi(e,t,n){let r=e[0],a=p(r).chroma,o=ci(e),m=tn(e,!1),i=[];return m.forEach((s,u)=>{let c=n.assumePerfectFifth&&hi(s);ie().filter(l=>n.assumePerfectFifth&&Pi(l)?l.chroma===c:l.chroma===s).forEach(l=>{let M=l.aliases[0],P=o(u);u!==a?i.push({weight:.5*t,name:`${P}${M}/${r}`}):i.push({weight:1*t,name:`${P}${M}`})})}),i}var wM="P m M m M P d P m M m M".split(" ");var SM=Fr((e,t)=>[e[0]+t[0],e[1]+t[1]]);var $r=Fr((e,t)=>[e[0]-t[0],e[1]-t[1]]);function Fr(e){return(t,n)=>{let r=I(t).coord,a=I(n).coord;if(r&&a){let o=e(r,a);return st(o).name}}}var fi=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],yi=fi,gi={...O,intervals:[],aliases:[]},Rr=[],De={};function Ce(e){return De[e]||gi}var CM=A("ScaleDictionary.scaleType","ScaleType.get",Ce);function Ee(){return Rr.slice()}var EM=A("ScaleDictionary.entries","ScaleType.all",Ee);function bi(e,t,n=[]){let r={...q(e),name:t,intervals:e,aliases:n};return Rr.push(r),De[r.name]=r,De[r.setNum]=r,De[r.chroma]=r,r.aliases.forEach(a=>vi(r,a)),r}function vi(e,t){De[t]=e}yi.forEach(([e,t,...n])=>bi(e.split(" "),t,n));var Or={empty:!0,name:"",symbol:"",root:"",bass:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function ft(e){let[t,n,r,a]=ut(e);return t===""?mn("",e):t==="A"&&a==="ug"?mn("","aug"):mn(t+n,r+a)}function mn(e,t){let n=t.split("/");if(n.length===1)return[e,n[0],""];let[r,a,o,m]=ut(n[1]);return r!==""&&o===""&&m===""?[e,n[0],r+a]:[e,t,""]}function J(e){if(Array.isArray(e))return pt(e[1]||"",e[0],e[2]);if(e==="")return Or;{let[t,n,r]=ft(e),a=pt(n,t,r);return a.empty?pt(e):a}}function pt(e,t,n){let r=an(e),a=p(t||""),o=p(n||"");if(r.empty||t&&a.empty||n&&o.empty)return Or;let m=Me(a.pc,o.pc),i=r.intervals.indexOf(m),s=i>=0,u=s?o:p(""),c=i===-1?NaN:i+1,d=o.pc&&o.pc!==a.pc,l=Array.from(r.intervals);if(s)for(let h=1;h<c;h++){let R=l[0][0],S=l[0][1],xe=parseInt(R,10)+7;l.push(`${xe}${S}`),l.shift()}else if(d){let h=$r(Me(a.pc,o.pc),"8P");h&&l.unshift(h)}let M=a.empty?[]:l.map(h=>b(a.pc,h));e=r.aliases.indexOf(e)!==-1?e:r.aliases[0];let P=`${a.empty?"":a.pc}${e}${s&&c>1?"/"+u.pc:d?"/"+o.pc:""}`,L=`${t?a.pc+" ":""}${r.name}${s&&c>1?" over "+u.pc:d?" over "+o.pc:""}`;return{...r,name:L,symbol:P,tonic:a.pc,type:r.name,root:u.pc,bass:d?o.pc:"",intervals:l,rootDegree:c,notes:M}}var Ai=J;function Ni(e,t){let[n,r,a]=ft(e);if(!n)return e;let o=b(a,t),m=o?"/"+o:"";return b(n,t)+r+m}function ji(e){let t=J(e),n=Mt(t.chroma);return Ee().filter(r=>n(r.chroma)).map(r=>r.name)}function Ii(e){let t=J(e),n=Mt(t.chroma);return ie().filter(r=>n(r.chroma)).map(r=>t.tonic+r.aliases[0])}function xi(e){let t=J(e),n=nn(t.chroma);return ie().filter(r=>n(r.chroma)).map(r=>t.tonic+r.aliases[0])}function wi(e,t){let n=J(e),r=t||n.tonic;return!r||n.empty?[]:n.intervals.map(a=>b(r,a))}function Si(e,t){let n=J(e),r=t||n.tonic,a=dt(n.intervals,r);return o=>o?a(o>0?o-1:o):""}function _i(e,t){let n=J(e),r=t||n.tonic;return dt(n.intervals,r)}var yt={getChord:pt,get:J,detect:on,chordScales:ji,extended:Ii,reduced:xi,tokenize:ft,transpose:Ni,degrees:Si,steps:_i,notes:wi,chord:Ai};var Ti=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],Di=Ti,Ci=[];Di.forEach(([e,t,n])=>Ei(e,t,n));function Ei(e,t,n){Ci.push({empty:!1,dots:"",name:"",value:1/e,fraction:e<1?[1/e,1]:[1,e],shorthand:t,names:n})}var Vi=Math.log(2),ki=Math.log(440);function sn(e){let t=12*(Math.log(e)-ki)/Vi+69;return Math.round(t*100)/100}var $i="C C# D D# E F F# G G# A A# B".split(" "),Fi="C Db D Eb E F Gb G Ab A Bb B".split(" ");function W(e,t={}){if(isNaN(e)||e===-1/0||e===1/0)return"";e=Math.round(e);let r=(t.sharps===!0?$i:Fi)[e%12];if(t.pitchClass)return r;let a=Math.floor(e/12)-1;return r+a}var Ri=["C","D","E","F","G","A","B"],qr=e=>e.name,Gr=e=>e.map(p).filter(t=>!t.empty);function Oi(e){return e===void 0?Ri.slice():Array.isArray(e)?Gr(e).map(qr):[]}var E=p,qi=e=>E(e).name,Gi=e=>E(e).pc,Bi=e=>E(e).acc,zi=e=>E(e).oct,Ui=e=>E(e).midi,Li=e=>E(e).freq,Hi=e=>E(e).chroma;function Br(e){return W(e)}function Ki(e){return W(sn(e))}function Xi(e){return W(sn(e),{sharps:!0})}function Ji(e){return W(e,{sharps:!0})}var Ve=b,Wi=b,zr=e=>t=>Ve(t,e),Zi=zr,Ur=e=>t=>Ve(e,t),Qi=Ur;function cn(e,t){return Ve(e,[t,0])}var Yi=cn;function es(e,t){return Ve(e,[0,t])}var ln=(e,t)=>e.height-t.height,ts=(e,t)=>t.height-e.height;function Lr(e,t){return t=t||ln,Gr(e).sort(t).map(qr)}function Hr(e){return Lr(e,ln).filter((t,n,r)=>n===0||t!==r[n-1])}var ns=e=>{let t=E(e);return t.empty?"":W(t.midi||t.chroma,{sharps:t.alt>0,pitchClass:t.midi===null})};function Kr(e,t){let n=E(e);if(n.empty)return"";let r=E(t||W(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(r.empty||r.chroma!==n.chroma)return"";if(n.oct===void 0)return r.pc;let a=n.chroma-n.alt,o=r.chroma-r.alt,m=a>11||o<0?-1:a<0||o>11?1:0,i=n.oct+m;return r.pc+i}var gt={names:Oi,get:E,name:qi,pitchClass:Gi,accidentals:Bi,octave:zi,midi:Ui,ascending:ln,descending:ts,sortedNames:Lr,sortedUniqNames:Hr,fromMidi:Br,fromMidiSharps:Ji,freq:Li,fromFreq:Ki,fromFreqSharps:Xi,chroma:Hi,transpose:Ve,tr:Wi,transposeBy:zr,trBy:Zi,transposeFrom:Ur,trFrom:Qi,transposeFifths:cn,transposeOctaves:es,trFifths:Yi,simplify:ns,enharmonic:Kr};var Jr={empty:!0,name:"",chordType:""},Xr={};function se(e){return typeof e=="string"?Xr[e]||(Xr[e]=ms(e)):typeof e=="number"?se(un[e]||""):de(e)?rs(e):Dr(e)?se(e.name):Jr}var ZM=A("RomanNumeral.romanNumeral","RomanNumeral.get",se);function rs(e){return se(ct(e.alt)+un[e.step])}var as=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function os(e){return as.exec(e)||["","","",""]}var Wr="I II III IV V VI VII",un=Wr.split(" "),QM=Wr.toLowerCase().split(" ");function ms(e){let[t,n,r,a]=os(e);if(!r)return Jr;let o=r.toUpperCase(),m=un.indexOf(o),i=lt(n),s=1;return{empty:!1,name:t,roman:r,interval:I({step:m,alt:i,dir:s}).name,acc:n,chordType:a,alt:i,step:m,major:r===o,oct:0,dir:s}}var _=Object.freeze([]),Zr={type:"major",tonic:"",alteration:0,keySignature:""},bt={tonic:"",grades:_,intervals:_,scale:_,triads:_,chords:_,chordsHarmonicFunction:_,chordScales:_},rP={...Zr,...bt,type:"major",minorRelative:"",scale:_,secondaryDominants:_,secondaryDominantsMinorRelative:_,substituteDominants:_,substituteDominantsMinorRelative:_},aP={...Zr,type:"minor",relativeMajor:"",natural:bt,harmonic:bt,melodic:bt},dn=(e,t,n="")=>t.map((r,a)=>`${e[a]}${n}${r}`);function vt(e,t,n,r,a){return o=>{let m=e.map(s=>se(s).interval||""),i=m.map(s=>b(o,s));return{tonic:o,grades:e,intervals:m,scale:i,triads:dn(i,t),chords:dn(i,n),chordsHarmonicFunction:r.slice(),chordScales:dn(i,a," ")}}}var oP=vt("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),mP=vt("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),iP=vt("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),sP=vt("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));var Pn=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],Qr={...O,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},Yr=Pn.map(ss),Mn={};Yr.forEach(e=>{Mn[e.name]=e,e.aliases.forEach(t=>{Mn[t]=e})});function hn(e){return typeof e=="string"?Mn[e.toLowerCase()]||Qr:e&&e.name?hn(e.name):Qr}var fP=A("Mode.mode","Mode.get",hn);function is(){return Yr.slice()}var yP=A("Mode.mode","Mode.all",is);function ss(e){let[t,n,r,a,o,m,i]=e,s=i?[i]:[],u=Number(n).toString(2);return{empty:!1,intervals:Ce(a).intervals,modeNum:t,chroma:u,normalized:u,name:a,setNum:n,alt:r,triad:o,seventh:m,aliases:s}}function ea(e){return(t,n)=>{let r=hn(t);if(r.empty)return[];let a=Pe(r.modeNum,e),o=r.intervals.map(m=>b(n,m));return a.map((m,i)=>o[i]+m)}}var gP=ea(Pn.map(e=>e[4])),bP=ea(Pn.map(e=>e[5]));var cs={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function ls(e){if(typeof e!="string")return["",""];let t=e.indexOf(" "),n=p(e.substring(0,t));if(n.empty){let a=p(e);return a.empty?["",e]:[a.name,""]}let r=e.substring(n.name.length+1);return[n.name,r.length?r:""]}function us(e){let t=Array.isArray(e)?e:ls(e),n=p(t[0]).name,r=Ce(t[1]);if(r.empty)return cs;let a=r.name,o=n?r.intervals.map(i=>b(n,i)):[],m=n?n+" "+a:a;return{...r,name:m,type:a,tonic:n,notes:o}}var RP=A("Scale.scale","Scale.get",us);var ds=(e,t)=>{if(!t||!t.length)return e[0];let n=a=>gt.midi(a[a.length-1])||0,r=a=>Math.abs(n(t)-n(a));return e.sort((a,o)=>r(a)-r(o))[0]},pn={topNoteDiff:ds};var Ms={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},ta={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},Ps={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},na=ta;function hs(e,t=na){if(t[e])return t[e];let{aliases:n}=yt.get("C"+e),r=Object.keys(t).find(a=>n.includes(a))||"";if(r!==void 0)return t[r]}var fn={lookup:hs,lefthand:ta,triads:Ms,all:Ps,defaultDictionary:na};var ZP=fn.all,QP=pn.topNoteDiff;function An(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function Nn(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var da=[0,2,4,-1,1,3,5],Ma=da.map(e=>Math.floor(e*7/12));function Pa(e){let{step:t,alt:n,oct:r,dir:a=1}=e,o=da[t]+7*n;if(r===void 0)return[a*o];let m=r-Ma[t]-4*n;return[a*o,a*m]}var ys=[3,0,4,1,5,2,6];function ha(e){let[t,n,r]=e,a=ys[gs(t)],o=Math.floor((t+1)/7);if(n===void 0)return{step:a,alt:o,dir:r};let m=n+4*o+Ma[a];return{step:a,alt:o,oct:m,dir:r}}function gs(e){let t=(e+1)%7;return t<0?7+t:t}var ra=(e,t)=>Array(Math.abs(t)+1).join(e),vn=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),bs="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",vs="(AA|A|P|M|m|d|dd)([-+]?\\d+)",As=new RegExp("^"+bs+"|"+vs+"$");function Ns(e){let t=As.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var aa={};function Z(e){return typeof e=="string"?aa[e]||(aa[e]=js(e)):Nn(e)?Z(xs(e)):An(e)?Z(e.name):vn}var oa=[0,2,4,5,7,9,11],pa="PMMPPMM";function js(e){let t=Ns(e);if(t[0]==="")return vn;let n=+t[0],r=t[1],a=(Math.abs(n)-1)%7,o=pa[a];if(o==="M"&&r==="P")return vn;let m=o==="M"?"majorable":"perfectable",i=""+n+r,s=n<0?-1:1,u=n===8||n===-8?n:s*(a+1),c=Is(m,r),d=Math.floor((Math.abs(n)-1)/7),l=s*(oa[a]+c+12*d),M=(s*(oa[a]+c)%12+12)%12,P=Pa({step:a,alt:c,oct:d,dir:s});return{empty:!1,name:i,num:n,q:r,step:a,alt:c,dir:s,type:m,simple:u,semitones:l,chroma:M,coord:P,oct:d}}function fa(e,t){let[n,r=0]=e,a=n*7+r*12<0,o=t||a?[-n,-r,-1]:[n,r,1];return Z(ha(o))}function Is(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function xs(e){let{step:t,alt:n,oct:r=0,dir:a}=e;if(!a)return"";let o=t+1+7*r,m=o===0?t+1:o,i=a<0?"-":"",s=pa[t]==="M"?"majorable":"perfectable";return i+m+ws(s,n)}function ws(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?ra("A",t):ra("d",e==="perfectable"?t:t+1)}var ma=(e,t)=>Array(Math.abs(t)+1).join(e),ya=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),ia=new Map,Ss=e=>"CDEFGAB".charAt(e),ga=e=>e<0?ma("b",-e):ma("#",e),ba=e=>e[0]==="b"?-e.length:e.length;function f(e){let t=JSON.stringify(e),n=ia.get(t);if(n)return n;let r=typeof e=="string"?Cs(e):Nn(e)?f(Es(e)):An(e)?f(e.name):ya;return ia.set(t,r),r}var _s=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function jn(e){let t=_s.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function Ts(e){return f(ha(e))}var Ds=(e,t)=>(e%t+t)%t,yn=[0,2,4,5,7,9,11];function Cs(e){let t=jn(e);if(t[0]===""||t[3]!=="")return ya;let n=t[0],r=t[1],a=t[2],o=(n.charCodeAt(0)+3)%7,m=ba(r),i=a.length?+a:void 0,s=Pa({step:o,alt:m,oct:i}),u=n+r+a,c=n+r,d=(yn[o]+m+120)%12,l=i===void 0?Ds(yn[o]+m,12)-12*99:yn[o]+m+12*(i+1),M=l>=0&&l<=127?l:null,P=i===void 0?null:Math.pow(2,(l-69)/12)*440;return{empty:!1,acc:r,alt:m,chroma:d,coord:s,freq:P,height:l,letter:n,midi:M,name:u,oct:i,pc:c,step:o}}function Es(e){let{step:t,alt:n,oct:r}=e,a=Ss(t);if(!a)return"";let o=a+ga(n);return r||r===0?o+r:o}function G(e,t){let n=f(e),r=Array.isArray(t)?t:Z(t).coord;if(n.empty||!r||r.length<2)return"";let a=n.coord,o=a.length===1?[a[0]+r[0]]:[a[0]+r[0],a[1]+r[1]];return Ts(o).name}function jt(e,t){let n=e.length;return r=>{if(!t)return"";let a=r<0?(n- -r%n)%n:r%n,o=Math.floor(r/n),m=G(t,[0,o]);return G(m,e[a])}}function sa(e,t){let n=f(e),r=f(t);if(n.empty||r.empty)return"";let a=n.coord,o=r.coord,m=o[0]-a[0],i=a.length===2&&o.length===2?o[1]-a[1]:-Math.floor(m*7/12),s=r.height===n.height&&r.midi!==null&&n.midi!==null&&n.step>r.step;return fa([m,i],s).name}var Fh="P m M m M P d P m M m M".split(" ");var Rh=va((e,t)=>[e[0]+t[0],e[1]+t[1]]);var Vs=va((e,t)=>[e[0]-t[0],e[1]-t[1]]);function va(e){return(t,n)=>{let r=Z(t).coord,a=Z(n).coord;if(r&&a){let o=e(r,a);return fa(o).name}}}function Q(e,t,n){return function(...r){return console.warn(`${e} is deprecated. Use ${t}.`),n.apply(this,r)}}var ks=Q("isNamed","isNamedPitch",An),$s=Math.log(2),Fs=Math.log(440);function Aa(e){let t=12*(Math.log(e)-Fs)/$s+69;return Math.round(t*100)/100}var Rs="C C# D D# E F F# G G# A A# B".split(" "),Os="C Db D Eb E F Gb G Ab A Bb B".split(" ");function pe(e,t={}){if(isNaN(e)||e===-1/0||e===1/0)return"";e=Math.round(e);let n=(t.sharps===!0?Rs:Os)[e%12];if(t.pitchClass)return n;let r=Math.floor(e/12)-1;return n+r}var qs=["C","D","E","F","G","A","B"],Na=e=>e.name,ja=e=>e.map(f).filter(t=>!t.empty);function Gs(e){return e===void 0?qs.slice():Array.isArray(e)?ja(e).map(Na):[]}var V=f,Bs=e=>V(e).name,zs=e=>V(e).pc,Us=e=>V(e).acc,Ls=e=>V(e).oct,Hs=e=>V(e).midi,Ks=e=>V(e).freq,Xs=e=>V(e).chroma;function Ia(e){return pe(e)}function Js(e){return pe(Aa(e))}function Ws(e){return pe(Aa(e),{sharps:!0})}function Zs(e){return pe(e,{sharps:!0})}var Re=G,Qs=G,xa=e=>t=>Re(t,e),Ys=xa,wa=e=>t=>Re(e,t),ec=wa;function Sa(e,t){return Re(e,[t,0])}var tc=Sa;function nc(e,t){return Re(e,[0,t])}var In=(e,t)=>e.height-t.height,rc=(e,t)=>t.height-e.height;function _a(e,t){return t=t||In,ja(e).sort(t).map(Na)}function Ta(e){return _a(e,In).filter((t,n,r)=>n===0||t!==r[n-1])}var ac=e=>{let t=V(e);return t.empty?"":pe(t.midi||t.chroma,{sharps:t.alt>0,pitchClass:t.midi===null})};function Da(e,t){let n=V(e);if(n.empty)return"";let r=V(t||pe(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(r.empty||r.chroma!==n.chroma)return"";if(n.oct===void 0)return r.pc;let a=n.chroma-n.alt,o=r.chroma-r.alt,m=a>11||o<0?-1:a<0||o>11?1:0,i=n.oct+m;return r.pc+i}var Ca={names:Gs,get:V,name:Bs,pitchClass:zs,accidentals:Us,octave:Ls,midi:Hs,ascending:In,descending:rc,sortedNames:_a,sortedUniqNames:Ta,fromMidi:Ia,fromMidiSharps:Zs,freq:Ks,fromFreq:Js,fromFreqSharps:Ws,chroma:Xs,transpose:Re,tr:Qs,transposeBy:xa,trBy:Ys,transposeFrom:wa,trFrom:ec,transposeFifths:Sa,transposeOctaves:nc,trFifths:tc,simplify:ac,enharmonic:Da};function oc(e,t){let n=[];for(;t--;n[t]=t+e);return n}function mc(e,t){let n=[];for(;t--;n[t]=e-t);return n}function ic(e,t){return e<t?oc(e,t-e+1):mc(e,e-t+1)}function It(e,t){let n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}function sc(e){return e.filter(t=>t===0||t)}var he={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},Ea=e=>Number(e).toString(2).padStart(12,"0"),ca=e=>parseInt(e,2),cc=/^[01]{12}$/;function xn(e){return cc.test(e)}var lc=e=>typeof e=="number"&&e>=0&&e<=4095,uc=e=>e&&xn(e.chroma),la={[he.chroma]:he};function H(e){let t=xn(e)?e:lc(e)?Ea(e):Array.isArray(e)?fc(e):uc(e)?e.chroma:he.chroma;return la[t]=la[t]||pc(t)}var Oh=Q("Pcset.pcset","Pcset.get",H),dc=e=>H(e).chroma,Mc=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function Pc(e){let t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(Mc[n]);return t}function Va(e,t=!0){let n=H(e).chroma.split("");return sc(n.map((r,a)=>{let o=It(a,n);return t&&o[0]==="0"?null:o.join("")}))}function wn(e){let t=H(e).setNum;return n=>{let r=H(n).setNum;return t&&t!==r&&(r&t)===r}}function Sn(e){let t=H(e).setNum;return n=>{let r=H(n).setNum;return t&&t!==r&&(r|t)===r}}function hc(e){let t=e.split("");return t.map((n,r)=>It(r,t).join(""))}function pc(e){let t=ca(e),n=hc(e).map(ca).filter(o=>o>=2048).sort()[0],r=Ea(n),a=Pc(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:a}}function fc(e){if(e.length===0)return he.chroma;let t,n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=f(e[r]),t.empty&&(t=Z(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var yc=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 \u0394 ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 \u03949 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 \u0394#4 \u0394#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -\u03947 m\u0394 -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim \xB0 o"],["1P 3m 5d 7d","diminished seventh","dim7 \xB07 o7"],["1P 3m 5d 7m","half-diminished","m7b5 \xF8 -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 \u03949#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],gc=yc,bc={...he,name:"",quality:"Unknown",intervals:[],aliases:[]},_n=[],ke={};function ka(e){return ke[e]||bc}var qh=Q("ChordType.chordType","ChordType.get",ka);function Oe(){return _n.slice()}var Gh=Q("ChordType.entries","ChordType.all",Oe);function vc(e,t,n){let r=Nc(e),a={...H(e),name:n||"",quality:r,intervals:e,aliases:t};_n.push(a),a.name&&(ke[a.name]=a),ke[a.setNum]=a,ke[a.chroma]=a,a.aliases.forEach(o=>Ac(a,o))}function Ac(e,t){ke[t]=e}function Nc(e){let t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}gc.forEach(([e,t,n])=>vc(e.split(" "),n.split(" "),t));_n.sort((e,t)=>e.setNum-t.setNum);var jc=e=>{let t=e.reduce((n,r)=>{let a=f(r).chroma;return a!==void 0&&(n[a]=n[a]||f(r).name),n},{});return n=>t[n]};function Ic(e,t={}){let n=e.map(r=>f(r).pc).filter(r=>r);return f.length===0?[]:Cc(n,1,t).filter(r=>r.weight).sort((r,a)=>a.weight-r.weight).map(r=>r.name)}var xt={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},wt=e=>t=>!!(t&e),xc=wt(xt.anyThirds),wc=wt(xt.perfectFifth),Sc=wt(xt.anySeventh),_c=wt(xt.nonPerfectFifths);function Tc(e){let t=parseInt(e.chroma,2);return xc(t)&&wc(t)&&Sc(t)}function Dc(e){let t=parseInt(e,2);return _c(t)?e:(t|16).toString(2)}function Cc(e,t,n){let r=e[0],a=f(r).chroma,o=jc(e),m=Va(e,!1),i=[];return m.forEach((s,u)=>{let c=n.assumePerfectFifth&&Dc(s);Oe().filter(d=>n.assumePerfectFifth&&Tc(d)?d.chroma===c:d.chroma===s).forEach(d=>{let l=d.aliases[0],M=o(u);u!==a?i.push({weight:.5*t,name:`${M}${l}/${r}`}):i.push({weight:1*t,name:`${M}${l}`})})}),i}var Ec=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],Vc=Ec,kc={...he,intervals:[],aliases:[]},Tn=[],$e={};function $c(){return Tn.map(e=>e.name)}function $a(e){return $e[e]||kc}var Bh=Q("ScaleDictionary.scaleType","ScaleType.get",$a);function qe(){return Tn.slice()}var zh=Q("ScaleDictionary.entries","ScaleType.all",qe);function Fc(e,t,n=[]){let r={...H(e),name:t,intervals:e,aliases:n};return Tn.push(r),$e[r.name]=r,$e[r.setNum]=r,$e[r.chroma]=r,r.aliases.forEach(a=>Rc(r,a)),r}function Rc(e,t){$e[t]=e}Vc.forEach(([e,t,...n])=>Fc(e.split(" "),t,n));var Fa={empty:!0,name:"",symbol:"",root:"",bass:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function Dn(e){let[t,n,r,a]=jn(e);return t===""?gn("",e):t==="A"&&a==="ug"?gn("","aug"):gn(t+n,r+a)}function gn(e,t){let n=t.split("/");if(n.length===1)return[e,n[0],""];let[r,a,o,m]=jn(n[1]);return r!==""&&o===""&&m===""?[e,n[0],r+a]:[e,t,""]}function Y(e){if(Array.isArray(e))return At(e[1]||"",e[0],e[2]);if(e==="")return Fa;{let[t,n,r]=Dn(e),a=At(n,t,r);return a.empty?At(e):a}}function At(e,t,n){let r=ka(e),a=f(t||""),o=f(n||"");if(r.empty||t&&a.empty||n&&o.empty)return Fa;let m=sa(a.pc,o.pc),i=r.intervals.indexOf(m),s=i>=0,u=s?o:f(""),c=i===-1?NaN:i+1,d=o.pc&&o.pc!==a.pc,l=Array.from(r.intervals);if(s)for(let h=1;h<c;h++){let R=l[0][0],S=l[0][1],xe=parseInt(R,10)+7;l.push(`${xe}${S}`),l.shift()}else if(d){let h=Vs(sa(a.pc,o.pc),"8P");h&&l.unshift(h)}let M=a.empty?[]:l.map(h=>G(a.pc,h));e=r.aliases.indexOf(e)!==-1?e:r.aliases[0];let P=`${a.empty?"":a.pc}${e}${s&&c>1?"/"+u.pc:d?"/"+o.pc:""}`,L=`${t?a.pc+" ":""}${r.name}${s&&c>1?" over "+u.pc:d?" over "+o.pc:""}`;return{...r,name:L,symbol:P,tonic:a.pc,type:r.name,root:u.pc,bass:d?o.pc:"",intervals:l,rootDegree:c,notes:M}}var Oc=Y;function qc(e,t){let[n,r,a]=Dn(e);if(!n)return e;let o=G(a,t),m=o?"/"+o:"";return G(n,t)+r+m}function Gc(e){let t=Y(e),n=Sn(t.chroma);return qe().filter(r=>n(r.chroma)).map(r=>r.name)}function Bc(e){let t=Y(e),n=Sn(t.chroma);return Oe().filter(r=>n(r.chroma)).map(r=>t.tonic+r.aliases[0])}function zc(e){let t=Y(e),n=wn(t.chroma);return Oe().filter(r=>n(r.chroma)).map(r=>t.tonic+r.aliases[0])}function Uc(e,t){let n=Y(e),r=t||n.tonic;return!r||n.empty?[]:n.intervals.map(a=>G(r,a))}function Lc(e,t){let n=Y(e),r=t||n.tonic,a=jt(n.intervals,r);return o=>o?a(o>0?o-1:o):""}function Hc(e,t){let n=Y(e),r=t||n.tonic;return jt(n.intervals,r)}var Kc={getChord:At,get:Y,detect:Ic,chordScales:Gc,extended:Bc,reduced:zc,tokenize:Dn,transpose:qc,degrees:Lc,steps:Hc,notes:Uc,chord:Oc},Xc={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function Ra(e){if(typeof e!="string")return["",""];let t=e.indexOf(" "),n=f(e.substring(0,t));if(n.empty){let a=f(e);return a.empty?["",e]:[a.name,""]}let r=e.substring(n.name.length+1);return[n.name,r.length?r:""]}var Jc=$c;function B(e){let t=Array.isArray(e)?e:Ra(e),n=f(t[0]).name,r=$a(t[1]);if(r.empty)return Xc;let a=r.name,o=n?r.intervals.map(i=>G(n,i)):[],m=n?n+" "+a:a;return{...r,name:m,type:a,tonic:n,notes:o}}var Wc=Q("Scale.scale","Scale.get",B);function Zc(e,t={}){let n=dc(e),r=f(t.tonic??e[0]??""),a=r.chroma;if(a===void 0)return[];let o=n.split("");o[a]="1";let m=It(a,o).join(""),i=qe().find(u=>u.chroma===m),s=[];return i&&s.push(r.name+" "+i.name),t.match==="exact"||Oa(m).forEach(u=>{s.push(r.name+" "+u)}),s}function Qc(e){let t=B(e),n=wn(t.chroma);return Oe().filter(r=>n(r.chroma)).map(r=>r.aliases[0])}function Oa(e){let t=xn(e)?e:B(e).chroma,n=Sn(t);return qe().filter(r=>n(r.chroma)).map(r=>r.name)}function Yc(e){let t=wn(B(e).chroma);return qe().filter(n=>t(n.chroma)).map(n=>n.name)}function qa(e){let t=e.map(a=>f(a).pc).filter(a=>a),n=t[0],r=Ta(t);return It(r.indexOf(n),r)}function el(e){let t=B(e);if(t.empty)return[];let n=t.tonic?t.notes:t.intervals;return Va(t.chroma).map((r,a)=>{let o=B(r).name;return o?[n[a],o]:["",""]}).filter(r=>r[0])}function tl(e){let t=Array.isArray(e)?qa(e):B(e).notes,n=t.map(r=>f(r).chroma);return r=>{let a=f(typeof r=="number"?Ia(r):r),o=a.height;if(o===void 0)return;let m=o%12,i=n.indexOf(m);if(i!==-1)return Da(a.name,t[i])}}function nl(e){let t=tl(e);return(n,r)=>{let a=f(n).height,o=f(r).height;return a===void 0||o===void 0?[]:ic(a,o).map(t).filter(m=>m)}}function rl(e){let{intervals:t,tonic:n}=B(e),r=jt(t,n);return a=>a?r(a>0?a-1:a):""}function al(e){let{intervals:t,tonic:n}=B(e);return jt(t,n)}var ol={degrees:rl,detect:Zc,extended:Oa,get:B,modeNames:el,names:Jc,rangeOf:nl,reduced:Yc,scaleChords:Qc,scaleNotes:qa,steps:al,tokenize:Ra,scale:Wc},Ga={empty:!0,name:"",chordType:""},ua={};function Fe(e){return typeof e=="string"?ua[e]||(ua[e]=cl(e)):typeof e=="number"?Fe(Cn[e]||""):Nn(e)?ml(e):ks(e)?Fe(e.name):Ga}var Uh=Q("RomanNumeral.romanNumeral","RomanNumeral.get",Fe);function ml(e){return Fe(ga(e.alt)+Cn[e.step])}var il=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function sl(e){return il.exec(e)||["","","",""]}var Ba="I II III IV V VI VII",Cn=Ba.split(" "),Lh=Ba.toLowerCase().split(" ");function cl(e){let[t,n,r,a]=sl(e);if(!r)return Ga;let o=r.toUpperCase(),m=Cn.indexOf(o),i=ba(n),s=1;return{empty:!1,name:t,roman:r,interval:Z({step:m,alt:i,dir:s}).name,acc:n,chordType:a,alt:i,step:m,major:r===o,oct:0,dir:s}}var T=Object.freeze([]),za={type:"major",tonic:"",alteration:0,keySignature:""},Nt={tonic:"",grades:T,intervals:T,scale:T,triads:T,chords:T,chordsHarmonicFunction:T,chordScales:T},Hh={...za,...Nt,type:"major",minorRelative:"",scale:T,secondaryDominants:T,secondaryDominantsMinorRelative:T,substituteDominants:T,substituteDominantsMinorRelative:T},Kh={...za,type:"minor",relativeMajor:"",natural:Nt,harmonic:Nt,melodic:Nt},bn=(e,t,n="")=>t.map((r,a)=>`${e[a]}${n}${r}`);function St(e,t,n,r,a){return o=>{let m=e.map(s=>Fe(s).interval||""),i=m.map(s=>G(o,s));return{tonic:o,grades:e,intervals:m,scale:i,triads:bn(i,t),chords:bn(i,n),chordsHarmonicFunction:r.slice(),chordScales:bn(i,a," ")}}}var Xh=St("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),Jh=St("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),Wh=St("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),Zh=St("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));var fe=Kc,En=ol;var On=(e,t)=>(e%t+t)%t,ll=(e,t,n)=>{let r=On(e,360)/60,a=t*Math.abs(On(r+1,2)-1);return[[t,a,0],[a,t,0],[0,t,a],[0,a,t],[a,0,t],[t,0,a]][Math.floor(r)].map(o=>Math.floor((o+1-t)*n*255))},ul=e=>"#"+e.map(t=>("0"+t.toString(16)).slice(-2)).join("");function zn(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function Un(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var so=[0,2,4,-1,1,3,5],co=so.map(e=>Math.floor(e*7/12));function lo(e){let{step:t,alt:n,oct:r,dir:a=1}=e,o=so[t]+7*n;if(r===void 0)return[a*o];let m=r-co[t]-4*n;return[a*o,a*m]}var dl=[3,0,4,1,5,2,6];function uo(e){let[t,n,r]=e,a=dl[Ml(t)],o=Math.floor((t+1)/7);if(n===void 0)return{step:a,alt:o,dir:r};let m=n+4*o+co[a];return{step:a,alt:o,oct:m,dir:r}}function Ml(e){let t=(e+1)%7;return t<0?7+t:t}var Ua=(e,t)=>Array(Math.abs(t)+1).join(e),qn=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),Pl="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",hl="(AA|A|P|M|m|d|dd)([-+]?\\d+)",pl=new RegExp("^"+Pl+"|"+hl+"$");function fl(e){let t=pl.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var La={};function ee(e){return typeof e=="string"?La[e]||(La[e]=yl(e)):Un(e)?ee(bl(e)):zn(e)?ee(e.name):qn}var Ha=[0,2,4,5,7,9,11],Mo="PMMPPMM";function yl(e){let t=fl(e);if(t[0]==="")return qn;let n=+t[0],r=t[1],a=(Math.abs(n)-1)%7,o=Mo[a];if(o==="M"&&r==="P")return qn;let m=o==="M"?"majorable":"perfectable",i=""+n+r,s=n<0?-1:1,u=n===8||n===-8?n:s*(a+1),c=gl(m,r),d=Math.floor((Math.abs(n)-1)/7),l=s*(Ha[a]+c+12*d),M=(s*(Ha[a]+c)%12+12)%12,P=lo({step:a,alt:c,oct:d,dir:s});return{empty:!1,name:i,num:n,q:r,step:a,alt:c,dir:s,type:m,simple:u,semitones:l,chroma:M,coord:P,oct:d}}function Po(e,t){let[n,r=0]=e,a=n*7+r*12<0,o=t||a?[-n,-r,-1]:[n,r,1];return ee(uo(o))}function gl(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function bl(e){let{step:t,alt:n,oct:r=0,dir:a}=e;if(!a)return"";let o=t+1+7*r,m=o===0?t+1:o,i=a<0?"-":"",s=Mo[t]==="M"?"majorable":"perfectable";return i+m+vl(s,n)}function vl(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?Ua("A",t):Ua("d",e==="perfectable"?t:t+1)}var Ka=(e,t)=>Array(Math.abs(t)+1).join(e),ho=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),Xa=new Map,Al=e=>"CDEFGAB".charAt(e),po=e=>e<0?Ka("b",-e):Ka("#",e),fo=e=>e[0]==="b"?-e.length:e.length;function g(e){let t=JSON.stringify(e),n=Xa.get(t);if(n)return n;let r=typeof e=="string"?xl(e):Un(e)?g(wl(e)):zn(e)?g(e.name):ho;return Xa.set(t,r),r}var Nl=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function Ln(e){let t=Nl.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function jl(e){return g(uo(e))}var Il=(e,t)=>(e%t+t)%t,Vn=[0,2,4,5,7,9,11];function xl(e){let t=Ln(e);if(t[0]===""||t[3]!=="")return ho;let n=t[0],r=t[1],a=t[2],o=(n.charCodeAt(0)+3)%7,m=fo(r),i=a.length?+a:void 0,s=lo({step:o,alt:m,oct:i}),u=n+r+a,c=n+r,d=(Vn[o]+m+120)%12,l=i===void 0?Il(Vn[o]+m,12)-12*99:Vn[o]+m+12*(i+1),M=l>=0&&l<=127?l:null,P=i===void 0?null:Math.pow(2,(l-69)/12)*440;return{empty:!1,acc:r,alt:m,chroma:d,coord:s,freq:P,height:l,letter:n,midi:M,name:u,oct:i,pc:c,step:o}}function wl(e){let{step:t,alt:n,oct:r}=e,a=Al(t);if(!a)return"";let o=a+po(n);return r||r===0?o+r:o}function k(e,t){let n=g(e),r=Array.isArray(t)?t:ee(t).coord;if(n.empty||!r||r.length<2)return"";let a=n.coord,o=a.length===1?[a[0]+r[0]]:[a[0]+r[0],a[1]+r[1]];return jl(o).name}function yo(e,t){let n=e.length;return r=>{if(!t)return"";let a=r<0?(n- -r%n)%n:r%n,o=Math.floor(r/n),m=k(t,[0,o]);return k(m,e[a])}}function Ja(e,t){let n=g(e),r=g(t);if(n.empty||r.empty)return"";let a=n.coord,o=r.coord,m=o[0]-a[0],i=a.length===2&&o.length===2?o[1]-a[1]:-Math.floor(m*7/12),s=r.height===n.height&&r.midi!==null&&n.midi!==null&&n.step>r.step;return Po([m,i],s).name}function U(e,t,n){return function(...r){return console.warn(`${e} is deprecated. Use ${t}.`),n.apply(this,r)}}var Sl=U("isNamed","isNamedPitch",zn);function Hn(e,t){let n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}function _l(e){return e.filter(t=>t===0||t)}var ce={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},go=e=>Number(e).toString(2).padStart(12,"0"),Wa=e=>parseInt(e,2),Tl=/^[01]{12}$/;function bo(e){return Tl.test(e)}var Dl=e=>typeof e=="number"&&e>=0&&e<=4095,Cl=e=>e&&bo(e.chroma),Za={[ce.chroma]:ce};function te(e){let t=bo(e)?e:Dl(e)?go(e):Array.isArray(e)?Ol(e):Cl(e)?e.chroma:ce.chroma;return Za[t]=Za[t]||Rl(t)}var ep=U("Pcset.pcset","Pcset.get",te),El=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function Vl(e){let t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(El[n]);return t}function kl(e,t=!0){let n=te(e).chroma.split("");return _l(n.map((r,a)=>{let o=Hn(a,n);return t&&o[0]==="0"?null:o.join("")}))}function $l(e){let t=te(e).setNum;return n=>{let r=te(n).setNum;return t&&t!==r&&(r&t)===r}}function vo(e){let t=te(e).setNum;return n=>{let r=te(n).setNum;return t&&t!==r&&(r|t)===r}}function Fl(e){let t=e.split("");return t.map((n,r)=>Hn(r,t).join(""))}function Rl(e){let t=Wa(e),n=Fl(e).map(Wa).filter(o=>o>=2048).sort()[0],r=go(n),a=Vl(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:a}}function Ol(e){if(e.length===0)return ce.chroma;let t,n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=g(e[r]),t.empty&&(t=ee(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var ql=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 \u0394 ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 \u03949 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 \u0394#4 \u0394#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -\u03947 m\u0394 -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim \xB0 o"],["1P 3m 5d 7d","diminished seventh","dim7 \xB07 o7"],["1P 3m 5d 7m","half-diminished","m7b5 \xF8 -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 \u03949#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],Gl=ql,Bl={...ce,name:"",quality:"Unknown",intervals:[],aliases:[]},Kn=[],Ge={};function Ao(e){return Ge[e]||Bl}var tp=U("ChordType.chordType","ChordType.get",Ao);function Ct(){return Kn.slice()}var np=U("ChordType.entries","ChordType.all",Ct);function zl(e,t,n){let r=Ll(e),a={...te(e),name:n||"",quality:r,intervals:e,aliases:t};Kn.push(a),a.name&&(Ge[a.name]=a),Ge[a.setNum]=a,Ge[a.chroma]=a,a.aliases.forEach(o=>Ul(a,o))}function Ul(e,t){Ge[t]=e}function Ll(e){let t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}Gl.forEach(([e,t,n])=>zl(e.split(" "),n.split(" "),t));Kn.sort((e,t)=>e.setNum-t.setNum);var Hl=e=>{let t=e.reduce((n,r)=>{let a=g(r).chroma;return a!==void 0&&(n[a]=n[a]||g(r).name),n},{});return n=>t[n]};function Kl(e,t={}){let n=e.map(r=>g(r).pc).filter(r=>r);return g.length===0?[]:e1(n,1,t).filter(r=>r.weight).sort((r,a)=>a.weight-r.weight).map(r=>r.name)}var Et={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},Vt=e=>t=>!!(t&e),Xl=Vt(Et.anyThirds),Jl=Vt(Et.perfectFifth),Wl=Vt(Et.anySeventh),Zl=Vt(Et.nonPerfectFifths);function Ql(e){let t=parseInt(e.chroma,2);return Xl(t)&&Jl(t)&&Wl(t)}function Yl(e){let t=parseInt(e,2);return Zl(t)?e:(t|16).toString(2)}function e1(e,t,n){let r=e[0],a=g(r).chroma,o=Hl(e),m=kl(e,!1),i=[];return m.forEach((s,u)=>{let c=n.assumePerfectFifth&&Yl(s);Ct().filter(d=>n.assumePerfectFifth&&Ql(d)?d.chroma===c:d.chroma===s).forEach(d=>{let l=d.aliases[0],M=o(u);u!==a?i.push({weight:.5*t,name:`${M}${l}/${r}`}):i.push({weight:1*t,name:`${M}${l}`})})}),i}var rp="P m M m M P d P m M m M".split(" "),ap=No((e,t)=>[e[0]+t[0],e[1]+t[1]]),t1=No((e,t)=>[e[0]-t[0],e[1]-t[1]]);function No(e){return(t,n)=>{let r=ee(t).coord,a=ee(n).coord;if(r&&a){let o=e(r,a);return Po(o).name}}}var n1=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],r1=n1,a1={...ce,intervals:[],aliases:[]},jo=[],Be={};function Xn(e){return Be[e]||a1}var op=U("ScaleDictionary.scaleType","ScaleType.get",Xn);function Io(){return jo.slice()}var mp=U("ScaleDictionary.entries","ScaleType.all",Io);function o1(e,t,n=[]){let r={...te(e),name:t,intervals:e,aliases:n};return jo.push(r),Be[r.name]=r,Be[r.setNum]=r,Be[r.chroma]=r,r.aliases.forEach(a=>m1(r,a)),r}function m1(e,t){Be[t]=e}r1.forEach(([e,t,...n])=>o1(e.split(" "),t,n));var xo={empty:!0,name:"",symbol:"",root:"",bass:"",rootDegree:0,type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function Jn(e){let[t,n,r,a]=Ln(e);return t===""?kn("",e):t==="A"&&a==="ug"?kn("","aug"):kn(t+n,r+a)}function kn(e,t){let n=t.split("/");if(n.length===1)return[e,n[0],""];let[r,a,o,m]=Ln(n[1]);return r!==""&&o===""&&m===""?[e,n[0],r+a]:[e,t,""]}function re(e){if(Array.isArray(e))return _t(e[1]||"",e[0],e[2]);if(e==="")return xo;{let[t,n,r]=Jn(e),a=_t(n,t,r);return a.empty?_t(e):a}}function _t(e,t,n){let r=Ao(e),a=g(t||""),o=g(n||"");if(r.empty||t&&a.empty||n&&o.empty)return xo;let m=Ja(a.pc,o.pc),i=r.intervals.indexOf(m),s=i>=0,u=s?o:g(""),c=i===-1?NaN:i+1,d=o.pc&&o.pc!==a.pc,l=Array.from(r.intervals);if(s)for(let h=1;h<c;h++){let R=l[0][0],S=l[0][1],xe=parseInt(R,10)+7;l.push(`${xe}${S}`),l.shift()}else if(d){let h=t1(Ja(a.pc,o.pc),"8P");h&&l.unshift(h)}let M=a.empty?[]:l.map(h=>k(a.pc,h));e=r.aliases.indexOf(e)!==-1?e:r.aliases[0];let P=`${a.empty?"":a.pc}${e}${s&&c>1?"/"+u.pc:d?"/"+o.pc:""}`,L=`${t?a.pc+" ":""}${r.name}${s&&c>1?" over "+u.pc:d?" over "+o.pc:""}`;return{...r,name:L,symbol:P,tonic:a.pc,type:r.name,root:u.pc,bass:d?o.pc:"",intervals:l,rootDegree:c,notes:M}}var i1=re;function s1(e,t){let[n,r,a]=Jn(e);if(!n)return e;let o=k(a,t),m=o?"/"+o:"";return k(n,t)+r+m}function c1(e){let t=re(e),n=vo(t.chroma);return Io().filter(r=>n(r.chroma)).map(r=>r.name)}function l1(e){let t=re(e),n=vo(t.chroma);return Ct().filter(r=>n(r.chroma)).map(r=>t.tonic+r.aliases[0])}function u1(e){let t=re(e),n=$l(t.chroma);return Ct().filter(r=>n(r.chroma)).map(r=>t.tonic+r.aliases[0])}function d1(e,t){let n=re(e),r=t||n.tonic;return!r||n.empty?[]:n.intervals.map(a=>k(r,a))}function M1(e,t){let n=re(e),r=t||n.tonic,a=yo(n.intervals,r);return o=>o?a(o>0?o-1:o):""}function P1(e,t){let n=re(e),r=t||n.tonic;return yo(n.intervals,r)}var h1={getChord:_t,get:re,detect:Kl,chordScales:c1,extended:l1,reduced:u1,tokenize:Jn,transpose:s1,degrees:M1,steps:P1,notes:d1,chord:i1},p1=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]],f1=p1,y1=[];f1.forEach(([e,t,n])=>g1(e,t,n));function g1(e,t,n){y1.push({empty:!1,dots:"",name:"",value:1/e,fraction:e<1?[1/e,1]:[1,e],shorthand:t,names:n})}var b1=Math.log(2),v1=Math.log(440);function wo(e){let t=12*(Math.log(e)-v1)/b1+69;return Math.round(t*100)/100}var A1="C C# D D# E F F# G G# A A# B".split(" "),N1="C Db D Eb E F Gb G Ab A Bb B".split(" ");function ge(e,t={}){if(isNaN(e)||e===-1/0||e===1/0)return"";e=Math.round(e);let n=(t.sharps===!0?A1:N1)[e%12];if(t.pitchClass)return n;let r=Math.floor(e/12)-1;return n+r}var j1=["C","D","E","F","G","A","B"],So=e=>e.name,_o=e=>e.map(g).filter(t=>!t.empty);function I1(e){return e===void 0?j1.slice():Array.isArray(e)?_o(e).map(So):[]}var $=g,x1=e=>$(e).name,w1=e=>$(e).pc,S1=e=>$(e).acc,_1=e=>$(e).oct,T1=e=>$(e).midi,D1=e=>$(e).freq,C1=e=>$(e).chroma;function E1(e){return ge(e)}function V1(e){return ge(wo(e))}function k1(e){return ge(wo(e),{sharps:!0})}function $1(e){return ge(e,{sharps:!0})}var Ke=k,F1=k,To=e=>t=>Ke(t,e),R1=To,Do=e=>t=>Ke(e,t),O1=Do;function Co(e,t){return Ke(e,[t,0])}var q1=Co;function G1(e,t){return Ke(e,[0,t])}var Wn=(e,t)=>e.height-t.height,B1=(e,t)=>t.height-e.height;function Eo(e,t){return t=t||Wn,_o(e).sort(t).map(So)}function z1(e){return Eo(e,Wn).filter((t,n,r)=>n===0||t!==r[n-1])}var U1=e=>{let t=$(e);return t.empty?"":ge(t.midi||t.chroma,{sharps:t.alt>0,pitchClass:t.midi===null})};function L1(e,t){let n=$(e);if(n.empty)return"";let r=$(t||ge(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(r.empty||r.chroma!==n.chroma)return"";if(n.oct===void 0)return r.pc;let a=n.chroma-n.alt,o=r.chroma-r.alt,m=a>11||o<0?-1:a<0||o>11?1:0,i=n.oct+m;return r.pc+i}var H1={names:I1,get:$,name:x1,pitchClass:w1,accidentals:S1,octave:_1,midi:T1,ascending:Wn,descending:B1,sortedNames:Eo,sortedUniqNames:z1,fromMidi:E1,fromMidiSharps:$1,freq:D1,fromFreq:V1,fromFreqSharps:k1,chroma:C1,transpose:Ke,tr:F1,transposeBy:To,trBy:R1,transposeFrom:Do,trFrom:O1,transposeFifths:Co,transposeOctaves:G1,trFifths:q1,simplify:U1,enharmonic:L1},Vo={empty:!0,name:"",chordType:""},Qa={};function Le(e){return typeof e=="string"?Qa[e]||(Qa[e]=W1(e)):typeof e=="number"?Le(Zn[e]||""):Un(e)?K1(e):Sl(e)?Le(e.name):Vo}var ip=U("RomanNumeral.romanNumeral","RomanNumeral.get",Le);function K1(e){return Le(po(e.alt)+Zn[e.step])}var X1=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function J1(e){return X1.exec(e)||["","","",""]}var ko="I II III IV V VI VII",Zn=ko.split(" "),sp=ko.toLowerCase().split(" ");function W1(e){let[t,n,r,a]=J1(e);if(!r)return Vo;let o=r.toUpperCase(),m=Zn.indexOf(o),i=fo(n),s=1;return{empty:!1,name:t,roman:r,interval:ee({step:m,alt:i,dir:s}).name,acc:n,chordType:a,alt:i,step:m,major:r===o,oct:0,dir:s}}var D=Object.freeze([]),$o={type:"major",tonic:"",alteration:0,keySignature:""},Tt={tonic:"",grades:D,intervals:D,scale:D,triads:D,chords:D,chordsHarmonicFunction:D,chordScales:D},cp={...$o,...Tt,type:"major",minorRelative:"",scale:D,secondaryDominants:D,secondaryDominantsMinorRelative:D,substituteDominants:D,substituteDominantsMinorRelative:D},lp={...$o,type:"minor",relativeMajor:"",natural:Tt,harmonic:Tt,melodic:Tt},$n=(e,t,n="")=>t.map((r,a)=>`${e[a]}${n}${r}`);function kt(e,t,n,r,a){return o=>{let m=e.map(s=>Le(s).interval||""),i=m.map(s=>k(o,s));return{tonic:o,grades:e,intervals:m,scale:i,triads:$n(i,t),chords:$n(i,n),chordsHarmonicFunction:r.slice(),chordScales:$n(i,a," ")}}}var up=kt("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),dp=kt("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),Mp=kt("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),Pp=kt("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(",")),Qn=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]],Ya={...ce,name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]},Fo=Qn.map(Q1),Gn={};Fo.forEach(e=>{Gn[e.name]=e,e.aliases.forEach(t=>{Gn[t]=e})});function Yn(e){return typeof e=="string"?Gn[e.toLowerCase()]||Ya:e&&e.name?Yn(e.name):Ya}var hp=U("Mode.mode","Mode.get",Yn);function Z1(){return Fo.slice()}var pp=U("Mode.mode","Mode.all",Z1);function Q1(e){let[t,n,r,a,o,m,i]=e,s=i?[i]:[],u=Number(n).toString(2);return{empty:!1,intervals:Xn(a).intervals,modeNum:t,chroma:u,normalized:u,name:a,setNum:n,alt:r,triad:o,seventh:m,aliases:s}}function Ro(e){return(t,n)=>{let r=Yn(t);if(r.empty)return[];let a=Hn(r.modeNum,e),o=r.intervals.map(m=>k(n,m));return a.map((m,i)=>o[i]+m)}}var fp=Ro(Qn.map(e=>e[4])),yp=Ro(Qn.map(e=>e[5])),Y1={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function eu(e){if(typeof e!="string")return["",""];let t=e.indexOf(" "),n=g(e.substring(0,t));if(n.empty){let a=g(e);return a.empty?["",e]:[a.name,""]}let r=e.substring(n.name.length+1);return[n.name,r.length?r:""]}function tu(e){let t=Array.isArray(e)?e:eu(e),n=g(t[0]).name,r=Xn(t[1]);if(r.empty)return Y1;let a=r.name,o=n?r.intervals.map(i=>k(n,i)):[],m=n?n+" "+a:a;return{...r,name:m,type:a,tonic:n,notes:o}}var gp=U("Scale.scale","Scale.get",tu),nu=(e,t)=>{if(!t||!t.length)return e[0];let n=a=>H1.midi(a[a.length-1])||0,r=a=>Math.abs(n(t)-n(a));return e.sort((a,o)=>r(a)-r(o))[0]},ru={topNoteDiff:nu},au={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"]},Oo={m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},ou={M:["1P 3M 5P","3M 5P 8P","5P 8P 10M"],m:["1P 3m 5P","3m 5P 8P","5P 8P 10m"],o:["1P 3m 5d","3m 5d 8P","5d 8P 10m"],aug:["1P 3m 5A","3m 5A 8P","5A 8P 10m"],m7:["3m 5P 7m 9M","7m 9M 10m 12P"],7:["3M 6M 7m 9M","7m 9M 10M 13M"],"^7":["3M 5P 7M 9M","7M 9M 10M 12P"],69:["3M 5P 6A 9M"],m7b5:["3m 5d 7m 8P","7m 8P 10m 12d"],"7b9":["3M 6m 7m 9m","7m 9m 10M 13m"],"7b13":["3M 6m 7m 9m","7m 9m 10M 13m"],o7:["1P 3m 5d 6M","5d 6M 8P 10m"],"7#11":["7m 9M 11A 13A"],"7#9":["3M 7m 9A"],mM7:["3m 5P 7M 9M","7M 9M 10m 12P"],m6:["3m 5P 6M 9M","6M 9M 10m 12P"]},qo=Oo;function mu(e,t=qo){if(t[e])return t[e];let{aliases:n}=h1.get("C"+e),r=Object.keys(t).find(a=>n.includes(a))||"";if(r!==void 0)return t[r]}var iu={lookup:mu,lefthand:Oo,triads:au,all:ou,defaultDictionary:qo},bp=iu.all,vp=ru.topNoteDiff;function er(e){return e!==null&&typeof e=="object"&&"name"in e&&typeof e.name=="string"}function tr(e){return e!==null&&typeof e=="object"&&"step"in e&&typeof e.step=="number"&&"alt"in e&&typeof e.alt=="number"&&!isNaN(e.step)&&!isNaN(e.alt)}var Go=[0,2,4,-1,1,3,5],Bo=Go.map(e=>Math.floor(e*7/12));function zo(e){let{step:t,alt:n,oct:r,dir:a=1}=e,o=Go[t]+7*n;if(r===void 0)return[a*o];let m=r-Bo[t]-4*n;return[a*o,a*m]}var su=[3,0,4,1,5,2,6];function Uo(e){let[t,n,r]=e,a=su[cu(t)],o=Math.floor((t+1)/7);if(n===void 0)return{step:a,alt:o,dir:r};let m=n+4*o+Bo[a];return{step:a,alt:o,oct:m,dir:r}}function cu(e){let t=(e+1)%7;return t<0?7+t:t}var eo=(e,t)=>Array(Math.abs(t)+1).join(e),Bn=Object.freeze({empty:!0,name:"",num:NaN,q:"",type:"",step:NaN,alt:NaN,dir:NaN,simple:NaN,semitones:NaN,chroma:NaN,coord:[],oct:NaN}),lu="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",uu="(AA|A|P|M|m|d|dd)([-+]?\\d+)",du=new RegExp("^"+lu+"|"+uu+"$");function Mu(e){let t=du.exec(`${e}`);return t===null?["",""]:t[1]?[t[1],t[2]]:[t[4],t[3]]}var to={};function ne(e){return typeof e=="string"?to[e]||(to[e]=Pu(e)):tr(e)?ne(fu(e)):er(e)?ne(e.name):Bn}var no=[0,2,4,5,7,9,11],Lo="PMMPPMM";function Pu(e){let t=Mu(e);if(t[0]==="")return Bn;let n=+t[0],r=t[1],a=(Math.abs(n)-1)%7,o=Lo[a];if(o==="M"&&r==="P")return Bn;let m=o==="M"?"majorable":"perfectable",i=""+n+r,s=n<0?-1:1,u=n===8||n===-8?n:s*(a+1),c=pu(m,r),d=Math.floor((Math.abs(n)-1)/7),l=s*(no[a]+c+12*d),M=(s*(no[a]+c)%12+12)%12,P=zo({step:a,alt:c,oct:d,dir:s});return{empty:!1,name:i,num:n,q:r,step:a,alt:c,dir:s,type:m,simple:u,semitones:l,chroma:M,coord:P,oct:d}}function hu(e,t){let[n,r=0]=e,a=n*7+r*12<0,o=t||a?[-n,-r,-1]:[n,r,1];return ne(Uo(o))}function pu(e,t){return t==="M"&&e==="majorable"||t==="P"&&e==="perfectable"?0:t==="m"&&e==="majorable"?-1:/^A+$/.test(t)?t.length:/^d+$/.test(t)?-1*(e==="perfectable"?t.length:t.length+1):0}function fu(e){let{step:t,alt:n,oct:r=0,dir:a}=e;if(!a)return"";let o=t+1+7*r,m=o===0?t+1:o,i=a<0?"-":"",s=Lo[t]==="M"?"majorable":"perfectable";return i+m+yu(s,n)}function yu(e,t){return t===0?e==="majorable"?"M":"P":t===-1&&e==="majorable"?"m":t>0?eo("A",t):eo("d",e==="perfectable"?t:t+1)}var ro=(e,t)=>Array(Math.abs(t)+1).join(e),Ho=Object.freeze({empty:!0,name:"",letter:"",acc:"",pc:"",step:NaN,alt:NaN,chroma:NaN,height:NaN,coord:[],midi:null,freq:null}),ao=new Map,gu=e=>"CDEFGAB".charAt(e),Ko=e=>e<0?ro("b",-e):ro("#",e),Xo=e=>e[0]==="b"?-e.length:e.length;function z(e){let t=JSON.stringify(e),n=ao.get(t);if(n)return n;let r=typeof e=="string"?ju(e):tr(e)?z(Iu(e)):er(e)?z(e.name):Ho;return ao.set(t,r),r}var bu=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function vu(e){let t=bu.exec(e);return t?[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]:["","","",""]}function Au(e){return z(Uo(e))}var Nu=(e,t)=>(e%t+t)%t,Fn=[0,2,4,5,7,9,11];function ju(e){let t=vu(e);if(t[0]===""||t[3]!=="")return Ho;let n=t[0],r=t[1],a=t[2],o=(n.charCodeAt(0)+3)%7,m=Xo(r),i=a.length?+a:void 0,s=zo({step:o,alt:m,oct:i}),u=n+r+a,c=n+r,d=(Fn[o]+m+120)%12,l=i===void 0?Nu(Fn[o]+m,12)-12*99:Fn[o]+m+12*(i+1),M=l>=0&&l<=127?l:null,P=i===void 0?null:Math.pow(2,(l-69)/12)*440;return{empty:!1,acc:r,alt:m,chroma:d,coord:s,freq:P,height:l,letter:n,midi:M,name:u,oct:i,pc:c,step:o}}function Iu(e){let{step:t,alt:n,oct:r}=e,a=gu(t);if(!a)return"";let o=a+Ko(n);return r||r===0?o+r:o}function $t(e,t){let n=z(e),r=Array.isArray(t)?t:ne(t).coord;if(n.empty||!r||r.length<2)return"";let a=n.coord,o=a.length===1?[a[0]+r[0]]:[a[0]+r[0],a[1]+r[1]];return Au(o).name}var Ap="P m M m M P d P m M m M".split(" "),Np=Jo((e,t)=>[e[0]+t[0],e[1]+t[1]]),jp=Jo((e,t)=>[e[0]-t[0],e[1]-t[1]]);function Jo(e){return(t,n)=>{let r=ne(t).coord,a=ne(n).coord;if(r&&a){let o=e(r,a);return hu(o).name}}}function ae(e,t,n){return function(...r){return console.warn(`${e} is deprecated. Use ${t}.`),n.apply(this,r)}}var xu=ae("isNamed","isNamedPitch",er),wu=Math.log(2),Su=Math.log(440);function Wo(e){let t=12*(Math.log(e)-Su)/wu+69;return Math.round(t*100)/100}var _u="C C# D D# E F F# G G# A A# B".split(" "),Tu="C Db D Eb E F Gb G Ab A Bb B".split(" ");function be(e,t={}){if(isNaN(e)||e===-1/0||e===1/0)return"";e=Math.round(e);let n=(t.sharps===!0?_u:Tu)[e%12];if(t.pitchClass)return n;let r=Math.floor(e/12)-1;return n+r}var Du=["C","D","E","F","G","A","B"],Zo=e=>e.name,Qo=e=>e.map(z).filter(t=>!t.empty);function Cu(e){return e===void 0?Du.slice():Array.isArray(e)?Qo(e).map(Zo):[]}var F=z,Eu=e=>F(e).name,Vu=e=>F(e).pc,ku=e=>F(e).acc,$u=e=>F(e).oct,Fu=e=>F(e).midi,Ru=e=>F(e).freq,Ou=e=>F(e).chroma;function qu(e){return be(e)}function Gu(e){return be(Wo(e))}function Bu(e){return be(Wo(e),{sharps:!0})}function zu(e){return be(e,{sharps:!0})}var Xe=$t,Uu=$t,Yo=e=>t=>Xe(t,e),Lu=Yo,em=e=>t=>Xe(e,t),Hu=em;function tm(e,t){return Xe(e,[t,0])}var Ku=tm;function Xu(e,t){return Xe(e,[0,t])}var nr=(e,t)=>e.height-t.height,Ju=(e,t)=>t.height-e.height;function nm(e,t){return t=t||nr,Qo(e).sort(t).map(Zo)}function Wu(e){return nm(e,nr).filter((t,n,r)=>n===0||t!==r[n-1])}var Zu=e=>{let t=F(e);return t.empty?"":be(t.midi||t.chroma,{sharps:t.alt>0,pitchClass:t.midi===null})};function Qu(e,t){let n=F(e);if(n.empty)return"";let r=F(t||be(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(r.empty||r.chroma!==n.chroma)return"";if(n.oct===void 0)return r.pc;let a=n.chroma-n.alt,o=r.chroma-r.alt,m=a>11||o<0?-1:a<0||o>11?1:0,i=n.oct+m;return r.pc+i}var Yu={names:Cu,get:F,name:Eu,pitchClass:Vu,accidentals:ku,octave:$u,midi:Fu,ascending:nr,descending:Ju,sortedNames:nm,sortedUniqNames:Wu,fromMidi:qu,fromMidiSharps:zu,freq:Ru,fromFreq:Gu,fromFreqSharps:Bu,chroma:Ou,transpose:Xe,tr:Uu,transposeBy:Yo,trBy:Lu,transposeFrom:em,trFrom:Hu,transposeFifths:tm,transposeOctaves:Xu,trFifths:Ku,simplify:Zu,enharmonic:Qu};function ed(e,t){let n=t.length,r=(e%n+n)%n;return t.slice(r,n).concat(t.slice(0,r))}var ye={empty:!0,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]},rm=e=>Number(e).toString(2).padStart(12,"0"),oo=e=>parseInt(e,2),td=/^[01]{12}$/;function am(e){return td.test(e)}var nd=e=>typeof e=="number"&&e>=0&&e<=4095,rd=e=>e&&am(e.chroma),mo={[ye.chroma]:ye};function rr(e){let t=am(e)?e:nd(e)?rm(e):Array.isArray(e)?sd(e):rd(e)?e.chroma:ye.chroma;return mo[t]=mo[t]||id(t)}var Ip=ae("Pcset.pcset","Pcset.get",rr),ad=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function od(e){let t=[];for(let n=0;n<12;n++)e.charAt(n)==="1"&&t.push(ad[n]);return t}function md(e){let t=e.split("");return t.map((n,r)=>ed(r,t).join(""))}function id(e){let t=oo(e),n=md(e).map(oo).filter(o=>o>=2048).sort()[0],r=rm(n),a=od(e);return{empty:!1,name:"",setNum:t,chroma:e,normalized:r,intervals:a}}function sd(e){if(e.length===0)return ye.chroma;let t,n=[0,0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)t=z(e[r]),t.empty&&(t=ne(e[r])),t.empty||(n[t.chroma]=1);return n.join("")}var cd=[["1P 3M 5P","major","M ^  maj"],["1P 3M 5P 7M","major seventh","maj7 \u0394 ma7 M7 Maj7 ^7"],["1P 3M 5P 7M 9M","major ninth","maj9 \u03949 ^9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13 ^13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth added ninth","6add9 6/9 69 M69"],["1P 3M 6m 7M","major seventh flat sixth","M7b6 ^7b6"],["1P 3M 5P 7M 11A","major seventh sharp eleventh","maj#4 \u0394#4 \u0394#11 M7#11 ^7#11 maj7#11"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 mMaj7 m/M7 -\u03947 m\u0394 -^7 -maj7"],["1P 3m 5P 6M","minor sixth","m6 -6"],["1P 3m 5P 7m 9M","minor ninth","m9 -9"],["1P 3m 5P 7M 9M","minor/major ninth","mM9 mMaj9 -^9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11 -11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13 -13"],["1P 3m 5d","diminished","dim \xB0 o"],["1P 3m 5d 7d","diminished seventh","dim7 \xB07 o7"],["1P 3m 5d 7m","half-diminished","m7b5 \xF8 -7b5 h7 h"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant flat ninth","7b9"],["1P 3M 5P 7m 9A","dominant sharp ninth","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended fourth","sus4 sus"],["1P 2M 5P","suspended second","sus2"],["1P 4P 5P 7m","suspended fourth seventh","7sus4 7sus"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended fourth flat ninth","b9sus phryg 7b9sus 7b9sus4"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5 ^#5"],["1P 3m 5A","minor augmented","m#5 -#5 m+"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5 +maj7 ^7#5"],["1P 3M 5P 7M 9M 11A","major sharp eleventh (lydian)","maj9#11 \u03949#11 ^9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7+ 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7#9#5 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9 7b9#5"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3m 5P 6M 9M","","m69 -69"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9 7#9b5"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9 7b9b5"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 5A 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 2M 3m 5d 7m","","m9b5"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]],ld=cd,ud={...ye,name:"",quality:"Unknown",intervals:[],aliases:[]},ar=[],ze={};function dd(e){return ze[e]||ud}var xp=ae("ChordType.chordType","ChordType.get",dd);function Md(){return ar.slice()}var wp=ae("ChordType.entries","ChordType.all",Md);function Pd(e,t,n){let r=pd(e),a={...rr(e),name:n||"",quality:r,intervals:e,aliases:t};ar.push(a),a.name&&(ze[a.name]=a),ze[a.setNum]=a,ze[a.chroma]=a,a.aliases.forEach(o=>hd(a,o))}function hd(e,t){ze[t]=e}function pd(e){let t=n=>e.indexOf(n)!==-1;return t("5A")?"Augmented":t("3M")?"Major":t("5d")?"Diminished":t("3m")?"Minor":"Unknown"}ld.forEach(([e,t,n])=>Pd(e.split(" "),n.split(" "),t));ar.sort((e,t)=>e.setNum-t.setNum);var Ft={anyThirds:384,perfectFifth:16,nonPerfectFifths:40,anySeventh:3},Rt=e=>t=>!!(t&e),Sp=Rt(Ft.anyThirds),_p=Rt(Ft.perfectFifth),Tp=Rt(Ft.anySeventh),Dp=Rt(Ft.nonPerfectFifths),fd=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2M 3m 4P 5P 6m 7m","minor","aeolian"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 6A","whole tone","messiaen's mode #1"],["1P 2m 4P 4A 5P 7M","messiaen's mode #5"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2m 2A 3M 4A 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished","aeolian b5"],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 4A 5P 6M 7m","dorian #4","ukrainian dorian","romanian minor","altered dorian"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 2M 4P 4A 5P 6m 7M","messiaen's mode #4"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished","messiaen's mode #2"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3M 4P 4A 5A 6A 7M","messiaen's mode #6"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2M 3m 3M 4A 5P 6m 7m 7M","messiaen's mode #3"],["1P 2m 2M 3m 4P 4A 5P 6m 6M 7M","messiaen's mode #7"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]],yd=fd,gd={...ye,intervals:[],aliases:[]},om=[],Ue={};function mm(e){return Ue[e]||gd}var Cp=ae("ScaleDictionary.scaleType","ScaleType.get",mm);function bd(){return om.slice()}var Ep=ae("ScaleDictionary.entries","ScaleType.all",bd);function vd(e,t,n=[]){let r={...rr(e),name:t,intervals:e,aliases:n};return om.push(r),Ue[r.name]=r,Ue[r.setNum]=r,Ue[r.chroma]=r,r.aliases.forEach(a=>Ad(r,a)),r}function Ad(e,t){Ue[t]=e}yd.forEach(([e,t,...n])=>vd(e.split(" "),t,n));var Nd={empty:!0,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function jd(e){if(typeof e!="string")return["",""];let t=e.indexOf(" "),n=z(e.substring(0,t));if(n.empty){let a=z(e);return a.empty?["",e]:[a.name,""]}let r=e.substring(n.name.length+1);return[n.name,r.length?r:""]}function Id(e){let t=Array.isArray(e)?e:jd(e),n=z(t[0]).name,r=mm(t[1]);if(r.empty)return Nd;let a=r.name,o=n?r.intervals.map(i=>$t(n,i)):[],m=n?n+" "+a:a;return{...r,name:m,type:a,tonic:n,notes:o}}var Vp=ae("Scale.scale","Scale.get",Id),im={empty:!0,name:"",chordType:""},io={};function He(e){return typeof e=="string"?io[e]||(io[e]=_d(e)):typeof e=="number"?He(or[e]||""):tr(e)?xd(e):xu(e)?He(e.name):im}var kp=ae("RomanNumeral.romanNumeral","RomanNumeral.get",He);function xd(e){return He(Ko(e.alt)+or[e.step])}var wd=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function Sd(e){return wd.exec(e)||["","","",""]}var sm="I II III IV V VI VII",or=sm.split(" "),$p=sm.toLowerCase().split(" ");function _d(e){let[t,n,r,a]=Sd(e);if(!r)return im;let o=r.toUpperCase(),m=or.indexOf(o),i=Xo(n),s=1;return{empty:!1,name:t,roman:r,interval:ne({step:m,alt:i,dir:s}).name,acc:n,chordType:a,alt:i,step:m,major:r===o,oct:0,dir:s}}var C=Object.freeze([]),cm={type:"major",tonic:"",alteration:0,keySignature:""},Dt={tonic:"",grades:C,intervals:C,scale:C,triads:C,chords:C,chordsHarmonicFunction:C,chordScales:C},Fp={...cm,...Dt,type:"major",minorRelative:"",scale:C,secondaryDominants:C,secondaryDominantsMinorRelative:C,substituteDominants:C,substituteDominantsMinorRelative:C},Rp={...cm,type:"minor",relativeMajor:"",natural:Dt,harmonic:Dt,melodic:Dt},Rn=(e,t,n="")=>t.map((r,a)=>`${e[a]}${n}${r}`);function Ot(e,t,n,r,a){return o=>{let m=e.map(s=>He(s).interval||""),i=m.map(s=>$t(o,s));return{tonic:o,grades:e,intervals:m,scale:i,triads:Rn(i,t),chords:Rn(i,n),chordsHarmonicFunction:r.slice(),chordScales:Rn(i,a," ")}}}var Op=Ot("I II III IV V VI VII".split(" ")," m m   m dim".split(" "),"maj7 m7 m7 maj7 7 m7 m7b5".split(" "),"T SD T SD D T D".split(" "),"major,dorian,phrygian,lydian,mixolydian,minor,locrian".split(",")),qp=Ot("I II bIII IV V bVI bVII".split(" "),"m dim  m m  ".split(" "),"m7 m7b5 maj7 m7 m7 maj7 7".split(" "),"T SD T SD D SD SD".split(" "),"minor,locrian,major,dorian,phrygian,lydian,mixolydian".split(",")),Gp=Ot("I II bIII IV V bVI VII".split(" "),"m dim aug m   dim".split(" "),"mMaj7 m7b5 +maj7 m7 7 maj7 o7".split(" "),"T SD T SD D SD D".split(" "),"harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian".split(",")),Bp=Ot("I II bIII IV V VI VII".split(" "),"m m aug   dim dim".split(" "),"m6 m7 +maj7 7 7 m7b5 m7b5".split(" "),"T SD T SD D  ".split(" "),"melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered".split(","));var Td=120;var Je=(e,t,n)=>{if(e.length===0)return"#444";let r=On(Yu.chroma(e)*5,12),a=ll(360*r/12+Td,t,n);return ul(a)},mr=e=>e.replace("major seventh","M7").replace("major","").replace("minor ","m").replace("minor","m").replace("seventh","7"),lm=e=>{let t=e.tonic,n=e.type;return n==="aeolian"?`${t?.toLowerCase()}-moll`:n==="ionian"?`${t?.toUpperCase()}-dur`:n==="minor"?`${t?.toUpperCase()}-moll`:n==="major"?`${t?.toUpperCase()}-dur`:e.name};var um=(e,t,n)=>{let r=0,a=0,o=e.length,m=e.length,i=t,s=n;if(e.length===0)return{begin_index:0,end_index:0};for(;o-r>1&&m-a>1;){let u=r+Math.floor((o-r)/2),c=r+Math.ceil((o-r)/2),d=e[u].end;i<d?o=c:(d<i,r=u);let l=a+Math.floor((m-a)/2),M=a+Math.ceil((m-a)/2),P=e[M].begin;s<P?m=M:P<s?a=l:m=M}return i<e[r].end&&(o=r),{begin_index:o,end_index:m}},qt=(e,t,n)=>{let r=0,a=0,o=e.length,m=e.length,i=t,s=n;if(e.length===0)return{begin_index:0,end_index:0};for(;o-r>1&&m-a>1;){let u=r+Math.floor((o-r)/2),c=r+Math.ceil((o-r)/2),d=e[u].begin;i<d?o=c:(d<i,r=u);let l=a+Math.floor((m-a)/2),M=a+Math.ceil((m-a)/2),P=e[M].begin;s<P?m=M:P<s?a=l:m=M}return i<=e[r].begin&&(o=r),{begin_index:o,end_index:m}};var Dd=!0,Cd=Lt.p({name:"debug"});Dd&&document.body.insertAdjacentElement("afterbegin",Cd);var Ed=window.MusicAnalyzer.roman.map(e=>e),We=window.MusicAnalyzer.melody.map(e=>e),K=Ed.map(e=>e),v=We.map(e=>e).filter((e,t)=>t+1>=We.length||60/(We[t+1].begin-We[t].begin)<300*4);window.play=ot;console.log(K);console.log(v);var Vd=()=>{let e=[],n=Ht(Math.ceil(v[v.length-1].end*100)),r=le(0,90).map(u=>Ht(90+u)),a=Math.log2(90);v.forEach((u,c)=>{if(c+1>=v.length)return;let d=v[c+1].begin-v[c].begin+(Math.random()-.5)/100;if(60/d>300*4)return;let l=Math.round(Math.pow(2,Se(Math.log2(60/d)-a)+a)),M=Math.round(Math.pow(3,Se(Math.log2(l)/Math.log2(3)-a/Math.log2(3))+a/Math.log2(3)));isNaN(e[M])&&(e[M]=0),e[M]++,le(0,90).forEach(P=>{r[P][Math.floor(at(u.begin,P+90))]++}),n[Math.floor(u.begin*100)]=1}),console.log("melody_bpm"),console.log(e);let o=r.map(u=>{let c=Xt(u),d=u.map(l=>l/c);return Xt(d.map(l=>l===0?0:-l*Math.log2(l)))});console.log(r),console.log("bpm_entropy"),console.log(o),n.forEach((u,c)=>u===0&&c!==0&&(n[c]=n[c-1]*.9));let m=u=>{let l=Math.log2(u/50)/2;return Math.exp(-l*l/2)};console.log("onsets"),console.log(n);let i=gr(n,n).map((u,c)=>m(c)*u[0]);console.log("tempo period strength"),console.log(i),console.log(Kt(i)),console.log(i.map((u,c)=>[u,c]).sort((u,c)=>u[0]>c[0]?-1:u[0]===c[0]?0:1));let s=[];return K.forEach((u,c)=>{if(c+1>=K.length)return;let d=K[c+1].begin-K[c].begin,l=Math.round(Math.pow(2,Se(Math.log2(60/d)-a)+a)),M=Math.round(Math.pow(3,Se(Math.log2(l)/Math.log2(3)-a/Math.log2(3))+a/Math.log2(3)));isNaN(s[M])&&(s[M]=0),s[M]++}),console.log("roman_bpm"),console.log(s),Kt(i)},Ye=Vd(),kd=0,dm=document.getElementById("audio_area"),ir=(()=>{let e=dm.getElementsByTagName("audio"),t=dm.getElementsByTagName("video");return e.length>0?e[0]:t[0]})(),je=class{width;height;fill;stroke;constructor(t){this.width=t.width,this.height=t.height,this.fill=t.fill,this.stroke=t.stroke}},et=()=>window.innerWidth-48,w=3*84,oe=3,tt=83,ve=new je({width:36,height:w/7,fill:"#fff",stroke:"#000"}),x=new je({width:ve.width*2/3,height:w/12,fill:"#444",stroke:"#000"}),Ae=new je({width:et(),height:w/12,fill:"#eee",stroke:"#000"}),Ne=new je({width:et(),height:w/12,fill:"#ccc",stroke:"#000"}),Ie=w*oe,Pr=yr(fr([2,4,6,9,11],tt),12),$d=le(0,12).filter(e=>!Pr.includes(e)),zt=4,nt=16*zt,Fd=-nt*3,N=5,pm=5,Gt=5,Bt=5,X=class{all;show;group;constructor(t,n){this.all=n,this.show=[],this.group=y.g({name:t},void 0,this.show.map(r=>r.svg))}updateShow(t,n){this.show.splice(0,this.show.length),this.group.childNodes.forEach(a=>this.group.removeChild(a));let r=um(this.all,t,n);this.all.slice(r.begin_index,r.end_index).forEach(a=>{this.show.push(a),this.group.appendChild(a.svg)})}},sr=new X("chords",K.map(e=>le(0,oe).map(t=>fe.get(e.chord).notes.map(n=>({svg:y.rect({fill:Je(fe.get(e.chord).tonic,.5,.9),stroke:"#444"}),begin:e.begin,end:e.end,y:(-1-at(Ca.chroma(n),12)+12*(t+1))*x.height,w:e.end-e.begin,h:x.height})))).flat(2)),cr=new X("chord-names",K.map(e=>({svg:y.text({id:"chord-name","font-family":"Times New Roman","font-size":`${zt}em`,fill:Je(fe.get(e.chord).tonic,1,.75)||"#000"},mr(fe.get(e.chord).name)),begin:e.begin,end:e.end,y:Ie+nt}))),lr=new X("roman-names",K.map(e=>({svg:y.text({id:"roman-name","font-family":"Times New Roman","font-size":`${zt}em`,fill:Je(fe.get(e.chord).tonic,1,.75)||"#000"},mr(e.roman)),begin:e.begin,end:e.end,y:Ie+nt*2+pm}))),ur=new X("key-names",K.map(e=>({svg:y.text({id:"key-name","font-family":"Times New Roman","font-size":`${zt}em`,fill:Je(En.get(e.scale).tonic,1,.75)||"#000"},lm(En.get(e.scale))),begin:e.begin,end:e.end,y:Ie+nt*2+pm})));console.log("tempo");console.log(Ye);console.log("duration");console.log(ir.duration);console.log("last melody");console.log(v[v.length-1].end);var Ze=new X("beat-bars",le(0,Math.ceil(Ye*v[v.length-1].end)+kd).map(e=>({svg:y.line({id:"bar",stroke:"#000"}),begin:e*60/Ye,end:(e+1)*60/Ye,y1:0,y2:Ie,sound_reserved:!1}))),dr=new X("detected-melody",We.map(e=>({svg:y.rect({name:"melody-note",fill:_e(Jt(0,0,.75)),stroke:"#444"}),begin:e.begin,end:e.end,note:e.note,y:(tt-e.note)*x.height,w:e.end-e.begin,h:x.height}))),Qe=new X("melody",v.map(e=>({svg:y.rect({name:"melody-note",fill:_e(Jt(180+360*2/7,.5,.9)),stroke:"#444"}),begin:e.begin,end:e.end,note:e.note,y:(tt-e.note)*x.height,w:e.end-e.begin,h:x.height,sound_reserved:!1}))),Mr=v.map((e,t)=>{let n=_e([0,0,0]),r=v.length<=t+1?v[t]:v[t+1],a=_e([0,0,0]);return e.melody_analysis.gravity.filter(o=>o.resolved&&o.destination!==void 0).map(o=>({triangle:y.polygon({name:"gravity-arrow",stroke:n,fill:a,"stroke-width":5}),line:y.line({name:"gravity-arrow",stroke:n,"stroke-width":5}),begin:e.begin,end:e.end,note:e.note,next:r,destination:o.destination,src_x0:(e.end-e.begin)/2+e.begin,dst_x0:r.begin,src_y0:(tt+.5-e.note)*x.height,dst_y0:(tt+.5-o.destination)*x.height}))}).flat(2),fm=[...Array(oe)].map((e,t)=>[...Array(7)].map((n,r)=>({svg:y.rect({name:"white-BG",fill:Ae.fill,stroke:Ae.stroke}),oct:t,y:w*t+Ae.height*$d[r],width:Ae.width,height:Ae.height}))).flat(),ym=[...Array(oe)].map((e,t)=>[...Array(5)].map((n,r)=>({svg:y.rect({name:"black-BG",fill:Ne.fill,stroke:Ne.stroke}),oct:t,y:w*t+Ne.height*Pr[r],width:Ne.width,height:Ne.height}))).flat(),gm=[...Array(oe)].map((e,t)=>[...Array(7)].map((n,r)=>({svg:y.rect({name:"white-key",fill:ve.fill,stroke:ve.stroke}),oct:t,y:w*t+ve.height*[0,1,2,3,4,5,6][r],width:ve.width,height:ve.height}))).flat(),bm=[...Array(oe)].map((e,t)=>[...Array(5)].map((n,r)=>({svg:y.rect({name:"black-key",fill:x.fill,stroke:x.stroke}),oct:t,y:w*t+x.height*Pr[r],width:x.width,height:x.height}))).flat(),vm=[...Array(oe)].map((e,t)=>({y:w*t,height:w,oct:t,svg:y.g({name:"octave-BG"},void 0,[fm.filter(n=>n.oct===t).map(n=>n.svg),ym.filter(n=>n.oct===t).map(n=>n.svg)])})),Am=[...Array(oe)].map((e,t)=>({y:w*t,height:w,oct:t,svg:y.g({name:"octave-key"},void 0,[gm.filter(n=>n.oct===t).map(n=>n.svg),bm.filter(n=>n.oct===t).map(n=>n.svg)])})),Nm=y.line({name:"current_time","stroke-width":5,stroke:"#000"}),jm=y.svg({name:"piano-roll"},void 0,[y.g({name:"octave-BGs"},void 0,vm.map(e=>e.svg)),Ze.group,sr.group,cr.group,lr.group,ur.group,dr.group,Qe.group,y.g({name:"gravities"},void 0,[Mr.map(e=>e.line),Mr.map(e=>e.triangle)]),y.g({name:"octave-keys"},void 0,Am.map(e=>e.svg)),Nm]),Rd=document.getElementById("piano-roll-place");Rd?.insertAdjacentElement("afterbegin",jm);var Od=(e,t,n,r)=>e.forEach(a=>{let o=a.src_x0*t-r+n,m=a.dst_x0*t-r+n,i=a.src_y0,s=a.dst_y0,u=m-o,c=s-i,d=Math.sqrt(u*u+c*c),l=-c/d,M=u/d,P=[m,s,m+l*Gt-M*Bt,s+M*Gt+l*Bt,m+l*-Gt-M*Bt,s+M*-Gt+l*Bt];a.triangle.setAttributes({points:`${P.join(",")}`}),a.line.setAttributes({x1:o,x2:m,y1:i,y2:s})}),Mm=Date.now(),Im=Lt.p({name:"fps"},"fps:0"),Pm=Number.MIN_SAFE_INTEGER,xm=()=>{let e=Date.now(),t=Math.floor(1e3/(e-Mm));Im.textContent=`fps:${(" "+t).slice(-3)} ${t<60?"<":">"} 60`,Mm=e;let n=ir.currentTime;if(ir.paused&&n===Pm)return;Pm=n;let r=1/4,a=et()*r,m=et()/N;sr.updateShow(n-N*r,n+N),cr.updateShow(n-N*r,n+N),lr.updateShow(n-N*r,n+N),ur.updateShow(n-N*r,n+N),Ze.updateShow(n-N*r,n+N),dr.updateShow(n-N*r,n+N),Qe.updateShow(n-N*r,n+N),sr.show.forEach(c=>c.svg.setAttributes({x:a+(c.begin-n)*m,y:c.y,width:c.w*m,height:c.h})),cr.show.forEach(c=>c.svg.setAttributes({x:a+(c.begin-n)*m,y:c.y})),lr.show.forEach(c=>c.svg.setAttributes({x:a+(c.begin-n)*m,y:c.y})),ur.show.forEach(c=>c.svg.setAttributes({x:a+(c.begin-n)*m+Fd,y:c.y})),Ze.show.forEach(c=>c.svg.setAttributes({x1:a+(c.begin-n)*m,x2:a+(c.begin-n)*m,y1:c.y1,y2:c.y2})),dr.show.forEach(c=>c.svg.setAttributes({x:a+(c.begin-n)*m,y:c.y,width:c.w*m,height:c.h,onclick:"insertMelody()"})),Qe.show.forEach(c=>c.svg.setAttributes({x:a+(c.begin-n)*m,y:c.y,width:c.w*m,height:c.h,onclick:"deleteMelody()"})),Od(Mr,m,a,n*m);let i=1/15,s=qt(Ze.show,n,n+i);for(let c=s.begin_index;c<s.end_index;c++){let d=Ze.show[c];d.sound_reserved===!1&&(ot([220],d.begin-n,.125),d.sound_reserved=!0,setTimeout(()=>{d.sound_reserved=!1},i*1e3))}let u=qt(Qe.show,n,n+i);for(let c=u.begin_index;c<u.end_index;c++){let d=Qe.show[c];d.sound_reserved===!1&&(ot([440*Math.pow(2,(d.note-69)/12)],d.begin-n,d.end-d.begin),d.sound_reserved=!0,setTimeout(()=>{d.sound_reserved=!1},i*1e3))}},hm=()=>{let e=et(),t=e/4,n=5;Ae.width=e,Ne.width=e,ym.forEach(r=>r.svg.setAttributes({x:0,y:r.y,width:r.width,height:r.height})),fm.forEach(r=>r.svg.setAttributes({x:0,y:r.y,width:r.width,height:r.height})),bm.forEach(r=>r.svg.setAttributes({x:0,y:r.y,width:r.width,height:r.height})),gm.forEach(r=>r.svg.setAttributes({x:0,y:r.y,width:r.width,height:r.height})),vm.forEach(r=>r.svg.setAttributes({x:0,y:r.y,width:e,height:r.height})),Am.forEach(r=>r.svg.setAttributes({x:0,y:r.y,width:e,height:r.height})),jm.setAttributes({x:0,y:0,width:e,height:Ie+nt*2+n}),Nm.setAttributes({x1:t,x2:t,y1:0,y2:Ie}),xm()},qd=()=>{console.log(qt(v,30,90));let e=()=>{requestAnimationFrame(e),xm()};window.onresize=t=>hm(),hm(),e(),document.body.insertAdjacentElement("beforeend",Im),console.log(Ye)};qd();
//# sourceMappingURL=index.js.map